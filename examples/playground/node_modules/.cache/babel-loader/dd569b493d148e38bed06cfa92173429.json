{"ast":null,"code":"import { calculateActiveDuration, calculateIterationProgress } from '../utils/animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\nimport { convertEffectInput } from '../utils/interpolation';\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        } // @ts-ignore\n\n\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n\n  return timing;\n}\nexport function normalizeTimingInput(timingInput, forGroup) {\n  timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nexport function numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n\n  return timingInput;\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\n\nvar KeyframeEffect =\n/** @class */\nfunction () {\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n    this.computedTiming = new Proxy(this.timing, {\n      get: function get(target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        } else if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        } else if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        } else if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n\n          return target.currentIteration || 0;\n        } else if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n\n          return target.progress || 0;\n        }\n\n        return target[prop];\n      },\n      set: function set() {\n        return true;\n      }\n    });\n  }\n\n  KeyframeEffect.prototype.applyInterpolations = function () {\n    this.interpolations(this.target, Number(this.timeFraction));\n  };\n\n  KeyframeEffect.prototype.update = function (localTime) {\n    if (localTime === null) {\n      return false;\n    }\n\n    this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n    return this.timeFraction !== null;\n  };\n\n  KeyframeEffect.prototype.getKeyframes = function () {\n    return this.normalizedKeyframes;\n  };\n\n  KeyframeEffect.prototype.setKeyframes = function (keyframes) {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n\n\n  KeyframeEffect.prototype.getComputedTiming = function () {\n    return this.computedTiming;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n\n\n  KeyframeEffect.prototype.getTiming = function () {\n    return this.timing;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n\n\n  KeyframeEffect.prototype.updateTiming = function (timing) {\n    var _this = this;\n\n    Object.keys(timing || {}).forEach(function (name) {\n      _this.timing = timing[name];\n    });\n  };\n\n  return KeyframeEffect;\n}();\n\nexport { KeyframeEffect };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/@antv/g/es/dom/KeyframeEffect.js"],"names":["calculateActiveDuration","calculateIterationProgress","AnimationEffectTiming","normalizeKeyframes","convertEffectInput","fills","split","directions","makeTiming","timingInput","forGroup","timing","fill","duration","isNaN","undefined","Object","keys","forEach","property","indexOf","normalizeTimingInput","numericTimingToObject","KeyframeEffect","target","effectInput","_this","composite","iterationComposite","effect","activeDuration","endTime","Math","max","delay","endDelay","normalizedKeyframes","interpolations","computedTiming","Proxy","get","prop","animation","currentTime","playState","currentIteration","progress","set","prototype","applyInterpolations","Number","timeFraction","update","localTime","getKeyframes","setKeyframes","keyframes","getComputedTiming","getTiming","updateTiming","name"],"mappings":"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","sourcesContent":["import { calculateActiveDuration, calculateIterationProgress } from '../utils/animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\nimport { convertEffectInput } from '../utils/interpolation';\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        } // @ts-ignore\n\n\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n\n  return timing;\n}\nexport function normalizeTimingInput(timingInput, forGroup) {\n  timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nexport function numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n\n  return timingInput;\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\n\nvar KeyframeEffect =\n/** @class */\nfunction () {\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n    this.computedTiming = new Proxy(this.timing, {\n      get: function get(target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        } else if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        } else if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        } else if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n\n          return target.currentIteration || 0;\n        } else if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n\n          return target.progress || 0;\n        }\n\n        return target[prop];\n      },\n      set: function set() {\n        return true;\n      }\n    });\n  }\n\n  KeyframeEffect.prototype.applyInterpolations = function () {\n    this.interpolations(this.target, Number(this.timeFraction));\n  };\n\n  KeyframeEffect.prototype.update = function (localTime) {\n    if (localTime === null) {\n      return false;\n    }\n\n    this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n    return this.timeFraction !== null;\n  };\n\n  KeyframeEffect.prototype.getKeyframes = function () {\n    return this.normalizedKeyframes;\n  };\n\n  KeyframeEffect.prototype.setKeyframes = function (keyframes) {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n\n\n  KeyframeEffect.prototype.getComputedTiming = function () {\n    return this.computedTiming;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n\n\n  KeyframeEffect.prototype.getTiming = function () {\n    return this.timing;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n\n\n  KeyframeEffect.prototype.updateTiming = function (timing) {\n    var _this = this;\n\n    Object.keys(timing || {}).forEach(function (name) {\n      _this.timing = timing[name];\n    });\n  };\n\n  return KeyframeEffect;\n}();\n\nexport { KeyframeEffect };"]},"metadata":{},"sourceType":"module"}