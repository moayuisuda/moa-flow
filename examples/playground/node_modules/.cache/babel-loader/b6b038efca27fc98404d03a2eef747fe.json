{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\n\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  return {\n    pageX: obj.pageX,\n    pageY: obj.pageY\n  };\n}\n\nexport default function useDrag(containerRef, direction, rawValues, min, max, formatValue, triggerChange, finishChange, offsetValues) {\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      draggingValue = _React$useState2[0],\n      setDraggingValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(-1),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      draggingIndex = _React$useState4[0],\n      setDraggingIndex = _React$useState4[1];\n\n  var _React$useState5 = React.useState(rawValues),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      cacheValues = _React$useState6[0],\n      setCacheValues = _React$useState6[1];\n\n  var _React$useState7 = React.useState(rawValues),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      originValues = _React$useState8[0],\n      setOriginValues = _React$useState8[1];\n\n  var mouseMoveEventRef = React.useRef(null);\n  var mouseUpEventRef = React.useRef(null);\n  React.useEffect(function () {\n    if (draggingIndex === -1) {\n      setCacheValues(rawValues);\n    }\n  }, [rawValues, draggingIndex]); // Clean up event\n\n  React.useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveEventRef.current);\n      document.removeEventListener('mouseup', mouseUpEventRef.current);\n      document.removeEventListener('touchmove', mouseMoveEventRef.current);\n      document.removeEventListener('touchend', mouseUpEventRef.current);\n    };\n  }, []);\n\n  var flushValues = function flushValues(nextValues, nextValue) {\n    // Perf: Only update state when value changed\n    if (cacheValues.some(function (val, i) {\n      return val !== nextValues[i];\n    })) {\n      if (nextValue !== undefined) {\n        setDraggingValue(nextValue);\n      }\n\n      setCacheValues(nextValues);\n      triggerChange(nextValues);\n    }\n  };\n\n  var updateCacheValue = function updateCacheValue(valueIndex, offsetPercent) {\n    // Basic point offset\n    if (valueIndex === -1) {\n      // >>>> Dragging on the track\n      var startValue = originValues[0];\n      var endValue = originValues[originValues.length - 1];\n      var maxStartOffset = min - startValue;\n      var maxEndOffset = max - endValue; // Get valid offset\n\n      var offset = offsetPercent * (max - min);\n      offset = Math.max(offset, maxStartOffset);\n      offset = Math.min(offset, maxEndOffset); // Use first value to revert back of valid offset (like steps marks)\n\n      var formatStartValue = formatValue(startValue + offset);\n      offset = formatStartValue - startValue;\n      var cloneCacheValues = originValues.map(function (val) {\n        return val + offset;\n      });\n      flushValues(cloneCacheValues);\n    } else {\n      // >>>> Dragging on the handle\n      var offsetDist = (max - min) * offsetPercent; // Always start with the valueIndex origin value\n\n      var cloneValues = _toConsumableArray(cacheValues);\n\n      cloneValues[valueIndex] = originValues[valueIndex];\n      var next = offsetValues(cloneValues, offsetDist, valueIndex, 'dist');\n      flushValues(next.values, next.value);\n    }\n  }; // Resolve closure\n\n\n  var updateCacheValueRef = React.useRef(updateCacheValue);\n  updateCacheValueRef.current = updateCacheValue;\n\n  var onStartMove = function onStartMove(e, valueIndex) {\n    e.stopPropagation();\n    var originValue = rawValues[valueIndex];\n    setDraggingIndex(valueIndex);\n    setDraggingValue(originValue);\n    setOriginValues(rawValues);\n\n    var _getPosition = getPosition(e),\n        startX = _getPosition.pageX,\n        startY = _getPosition.pageY; // Moving\n\n\n    var onMouseMove = function onMouseMove(event) {\n      event.preventDefault();\n\n      var _getPosition2 = getPosition(event),\n          moveX = _getPosition2.pageX,\n          moveY = _getPosition2.pageY;\n\n      var offsetX = moveX - startX;\n      var offsetY = moveY - startY;\n\n      var _containerRef$current = containerRef.current.getBoundingClientRect(),\n          width = _containerRef$current.width,\n          height = _containerRef$current.height;\n\n      var offSetPercent;\n\n      switch (direction) {\n        case 'btt':\n          offSetPercent = -offsetY / height;\n          break;\n\n        case 'ttb':\n          offSetPercent = offsetY / height;\n          break;\n\n        case 'rtl':\n          offSetPercent = -offsetX / width;\n          break;\n\n        default:\n          offSetPercent = offsetX / width;\n      }\n\n      updateCacheValueRef.current(valueIndex, offSetPercent);\n    }; // End\n\n\n    var onMouseUp = function onMouseUp(event) {\n      event.preventDefault();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('touchend', onMouseUp);\n      document.removeEventListener('touchmove', onMouseMove);\n      mouseMoveEventRef.current = null;\n      mouseUpEventRef.current = null;\n      setDraggingIndex(-1);\n      finishChange();\n    };\n\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchend', onMouseUp);\n    document.addEventListener('touchmove', onMouseMove);\n    mouseMoveEventRef.current = onMouseMove;\n    mouseUpEventRef.current = onMouseUp;\n  }; // Only return cache value when it mapping with rawValues\n\n\n  var returnValues = React.useMemo(function () {\n    var sourceValues = _toConsumableArray(rawValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    var targetValues = _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    return sourceValues.every(function (val, index) {\n      return val === targetValues[index];\n    }) ? cacheValues : rawValues;\n  }, [rawValues, cacheValues]);\n  return [draggingIndex, draggingValue, returnValues, onStartMove];\n}","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/rc-slider/es/hooks/useDrag.js"],"names":["_toConsumableArray","_slicedToArray","React","getPosition","e","obj","touches","pageX","pageY","useDrag","containerRef","direction","rawValues","min","max","formatValue","triggerChange","finishChange","offsetValues","_React$useState","useState","_React$useState2","draggingValue","setDraggingValue","_React$useState3","_React$useState4","draggingIndex","setDraggingIndex","_React$useState5","_React$useState6","cacheValues","setCacheValues","_React$useState7","_React$useState8","originValues","setOriginValues","mouseMoveEventRef","useRef","mouseUpEventRef","useEffect","document","removeEventListener","current","flushValues","nextValues","nextValue","some","val","i","undefined","updateCacheValue","valueIndex","offsetPercent","startValue","endValue","length","maxStartOffset","maxEndOffset","offset","Math","formatStartValue","cloneCacheValues","map","offsetDist","cloneValues","next","values","value","updateCacheValueRef","onStartMove","stopPropagation","originValue","_getPosition","startX","startY","onMouseMove","event","preventDefault","_getPosition2","moveX","moveY","offsetX","offsetY","_containerRef$current","getBoundingClientRect","width","height","offSetPercent","onMouseUp","addEventListener","returnValues","useMemo","sourceValues","sort","a","b","targetValues","every","index"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\n\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  return {\n    pageX: obj.pageX,\n    pageY: obj.pageY\n  };\n}\n\nexport default function useDrag(containerRef, direction, rawValues, min, max, formatValue, triggerChange, finishChange, offsetValues) {\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      draggingValue = _React$useState2[0],\n      setDraggingValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(-1),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      draggingIndex = _React$useState4[0],\n      setDraggingIndex = _React$useState4[1];\n\n  var _React$useState5 = React.useState(rawValues),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      cacheValues = _React$useState6[0],\n      setCacheValues = _React$useState6[1];\n\n  var _React$useState7 = React.useState(rawValues),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      originValues = _React$useState8[0],\n      setOriginValues = _React$useState8[1];\n\n  var mouseMoveEventRef = React.useRef(null);\n  var mouseUpEventRef = React.useRef(null);\n  React.useEffect(function () {\n    if (draggingIndex === -1) {\n      setCacheValues(rawValues);\n    }\n  }, [rawValues, draggingIndex]); // Clean up event\n\n  React.useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveEventRef.current);\n      document.removeEventListener('mouseup', mouseUpEventRef.current);\n      document.removeEventListener('touchmove', mouseMoveEventRef.current);\n      document.removeEventListener('touchend', mouseUpEventRef.current);\n    };\n  }, []);\n\n  var flushValues = function flushValues(nextValues, nextValue) {\n    // Perf: Only update state when value changed\n    if (cacheValues.some(function (val, i) {\n      return val !== nextValues[i];\n    })) {\n      if (nextValue !== undefined) {\n        setDraggingValue(nextValue);\n      }\n\n      setCacheValues(nextValues);\n      triggerChange(nextValues);\n    }\n  };\n\n  var updateCacheValue = function updateCacheValue(valueIndex, offsetPercent) {\n    // Basic point offset\n    if (valueIndex === -1) {\n      // >>>> Dragging on the track\n      var startValue = originValues[0];\n      var endValue = originValues[originValues.length - 1];\n      var maxStartOffset = min - startValue;\n      var maxEndOffset = max - endValue; // Get valid offset\n\n      var offset = offsetPercent * (max - min);\n      offset = Math.max(offset, maxStartOffset);\n      offset = Math.min(offset, maxEndOffset); // Use first value to revert back of valid offset (like steps marks)\n\n      var formatStartValue = formatValue(startValue + offset);\n      offset = formatStartValue - startValue;\n      var cloneCacheValues = originValues.map(function (val) {\n        return val + offset;\n      });\n      flushValues(cloneCacheValues);\n    } else {\n      // >>>> Dragging on the handle\n      var offsetDist = (max - min) * offsetPercent; // Always start with the valueIndex origin value\n\n      var cloneValues = _toConsumableArray(cacheValues);\n\n      cloneValues[valueIndex] = originValues[valueIndex];\n      var next = offsetValues(cloneValues, offsetDist, valueIndex, 'dist');\n      flushValues(next.values, next.value);\n    }\n  }; // Resolve closure\n\n\n  var updateCacheValueRef = React.useRef(updateCacheValue);\n  updateCacheValueRef.current = updateCacheValue;\n\n  var onStartMove = function onStartMove(e, valueIndex) {\n    e.stopPropagation();\n    var originValue = rawValues[valueIndex];\n    setDraggingIndex(valueIndex);\n    setDraggingValue(originValue);\n    setOriginValues(rawValues);\n\n    var _getPosition = getPosition(e),\n        startX = _getPosition.pageX,\n        startY = _getPosition.pageY; // Moving\n\n\n    var onMouseMove = function onMouseMove(event) {\n      event.preventDefault();\n\n      var _getPosition2 = getPosition(event),\n          moveX = _getPosition2.pageX,\n          moveY = _getPosition2.pageY;\n\n      var offsetX = moveX - startX;\n      var offsetY = moveY - startY;\n\n      var _containerRef$current = containerRef.current.getBoundingClientRect(),\n          width = _containerRef$current.width,\n          height = _containerRef$current.height;\n\n      var offSetPercent;\n\n      switch (direction) {\n        case 'btt':\n          offSetPercent = -offsetY / height;\n          break;\n\n        case 'ttb':\n          offSetPercent = offsetY / height;\n          break;\n\n        case 'rtl':\n          offSetPercent = -offsetX / width;\n          break;\n\n        default:\n          offSetPercent = offsetX / width;\n      }\n\n      updateCacheValueRef.current(valueIndex, offSetPercent);\n    }; // End\n\n\n    var onMouseUp = function onMouseUp(event) {\n      event.preventDefault();\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('touchend', onMouseUp);\n      document.removeEventListener('touchmove', onMouseMove);\n      mouseMoveEventRef.current = null;\n      mouseUpEventRef.current = null;\n      setDraggingIndex(-1);\n      finishChange();\n    };\n\n    document.addEventListener('mouseup', onMouseUp);\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('touchend', onMouseUp);\n    document.addEventListener('touchmove', onMouseMove);\n    mouseMoveEventRef.current = onMouseMove;\n    mouseUpEventRef.current = onMouseUp;\n  }; // Only return cache value when it mapping with rawValues\n\n\n  var returnValues = React.useMemo(function () {\n    var sourceValues = _toConsumableArray(rawValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    var targetValues = _toConsumableArray(cacheValues).sort(function (a, b) {\n      return a - b;\n    });\n\n    return sourceValues.every(function (val, index) {\n      return val === targetValues[index];\n    }) ? cacheValues : rawValues;\n  }, [rawValues, cacheValues]);\n  return [draggingIndex, draggingValue, returnValues, onStartMove];\n}"]},"metadata":{},"sourceType":"module"}