{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Target = void 0;\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar id_1 = require(\"../utils/id\");\n\nvar metadata_1 = require(\"./metadata\");\n\nvar queryable_string_1 = require(\"./queryable_string\");\n\nvar Target = function () {\n  function Target(type, name, serviceIdentifier, namedOrTagged) {\n    this.id = id_1.id();\n    this.type = type;\n    this.serviceIdentifier = serviceIdentifier;\n    this.name = new queryable_string_1.QueryableString(name || \"\");\n    this.metadata = new Array();\n    var metadataItem = null;\n\n    if (typeof namedOrTagged === \"string\") {\n      metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n    } else if (namedOrTagged instanceof metadata_1.Metadata) {\n      metadataItem = namedOrTagged;\n    }\n\n    if (metadataItem !== null) {\n      this.metadata.push(metadataItem);\n    }\n  }\n\n  Target.prototype.hasTag = function (key) {\n    for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n      var m = _a[_i];\n\n      if (m.key === key) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Target.prototype.isArray = function () {\n    return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n  };\n\n  Target.prototype.matchesArray = function (name) {\n    return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n  };\n\n  Target.prototype.isNamed = function () {\n    return this.hasTag(METADATA_KEY.NAMED_TAG);\n  };\n\n  Target.prototype.isTagged = function () {\n    return this.metadata.some(function (metadata) {\n      return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n        return metadata.key !== key;\n      });\n    });\n  };\n\n  Target.prototype.isOptional = function () {\n    return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n  };\n\n  Target.prototype.getNamedTag = function () {\n    if (this.isNamed()) {\n      return this.metadata.filter(function (m) {\n        return m.key === METADATA_KEY.NAMED_TAG;\n      })[0];\n    }\n\n    return null;\n  };\n\n  Target.prototype.getCustomTags = function () {\n    if (this.isTagged()) {\n      return this.metadata.filter(function (metadata) {\n        return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n          return metadata.key !== key;\n        });\n      });\n    } else {\n      return null;\n    }\n  };\n\n  Target.prototype.matchesNamedTag = function (name) {\n    return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n  };\n\n  Target.prototype.matchesTag = function (key) {\n    var _this = this;\n\n    return function (value) {\n      for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n        var m = _a[_i];\n\n        if (m.key === key && m.value === value) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  };\n\n  return Target;\n}();\n\nexports.Target = Target;","map":{"version":3,"mappings":"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","names":["type","name","serviceIdentifier","namedOrTagged","id","id_1","queryable_string_1","metadata","Array","metadataItem","metadata_1","METADATA_KEY","NAMED_TAG","push","Target","key","_i","m","hasTag","MULTI_INJECT_TAG","matchesTag","some","NON_CUSTOM_TAG_KEYS","every","OPTIONAL_TAG","isNamed","filter","isTagged","value","exports"],"sources":["../../src/planning/target.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}