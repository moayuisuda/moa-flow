{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BindingToSyntax = void 0;\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar literal_types_1 = require(\"../constants/literal_types\");\n\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\n\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\n\nvar BindingToSyntax = function () {\n  function BindingToSyntax(binding) {\n    this._binding = binding;\n  }\n\n  BindingToSyntax.prototype.to = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n    this._binding.implementationType = constructor;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toSelf = function () {\n    if (typeof this._binding.serviceIdentifier !== \"function\") {\n      throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n    }\n\n    var self = this._binding.serviceIdentifier;\n    return this.to(self);\n  };\n\n  BindingToSyntax.prototype.toConstantValue = function (value) {\n    this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n    this._binding.cache = value;\n    this._binding.dynamicValue = null;\n    this._binding.implementationType = null;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toDynamicValue = function (func) {\n    this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n    this._binding.cache = null;\n    this._binding.dynamicValue = func;\n    this._binding.implementationType = null;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toConstructor = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n    this._binding.implementationType = constructor;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFactory = function (factory) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n    this._binding.factory = factory;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFunction = function (func) {\n    if (typeof func !== \"function\") {\n      throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n    }\n\n    var bindingWhenOnSyntax = this.toConstantValue(func);\n    this._binding.type = literal_types_1.BindingTypeEnum.Function;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return bindingWhenOnSyntax;\n  };\n\n  BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n\n    this._binding.factory = function (context) {\n      var autofactory = function () {\n        return context.container.get(serviceIdentifier);\n      };\n\n      return autofactory;\n    };\n\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toProvider = function (provider) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n    this._binding.provider = provider;\n    this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toService = function (service) {\n    this.toDynamicValue(function (context) {\n      return context.container.get(service);\n    });\n  };\n\n  return BindingToSyntax;\n}();\n\nexports.BindingToSyntax = BindingToSyntax;","map":{"version":3,"mappings":"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","names":["binding","_binding","BindingToSyntax","constructor","type","literal_types_1","Instance","implementationType","binding_in_when_on_syntax_1","serviceIdentifier","Error","ERROR_MSGS","INVALID_TO_SELF_VALUE","self","to","value","ConstantValue","cache","dynamicValue","scope","Singleton","binding_when_on_syntax_1","func","DynamicValue","Constructor","factory","Factory","INVALID_FUNCTION_BINDING","bindingWhenOnSyntax","toConstantValue","Function","context","autofactory","container","get","provider","Provider","service","toDynamicValue","exports"],"sources":["../../src/syntax/binding_to_syntax.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}