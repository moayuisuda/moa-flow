{"ast":null,"code":"import { __assign, __extends, __rest } from \"tslib\";\nimport { Cubic as CubicUtil } from '@antv/g-math';\nimport { isNil } from 'lodash-es';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\nimport { Point } from '../shapes';\n\nvar Path =\n/** @class */\nfunction (_super) {\n  __extends(Path, _super);\n\n  function Path(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n\n    var style = _a.style,\n        rest = __rest(_a, [\"style\"]);\n\n    return _super.call(this, __assign({\n      type: Shape.PATH,\n      style: __assign({\n        path: '',\n        lineWidth: 1,\n        miterLimit: 4\n      }, style)\n    }, rest)) || this;\n  }\n\n  Path.prototype.getTotalLength = function () {\n    return this.parsedStyle.path.totalLength;\n  };\n  /**\n   * Get point according to ratio\n   */\n\n\n  Path.prototype.getPoint = function (ratio) {\n    var subt = 0;\n    var index = 0;\n    var curve = this.parsedStyle.path.curve;\n\n    if (!this.parsedStyle.path.curveSegments.length) {\n      if (curve) {\n        return new Point(curve[0][1], curve[0][2]);\n      }\n\n      return null;\n    }\n\n    this.parsedStyle.path.curveSegments.forEach(function (v, i) {\n      if (ratio >= v[0] && ratio <= v[1]) {\n        subt = (ratio - v[0]) / (v[1] - v[0]);\n        index = i;\n      }\n    });\n    var seg = curve[index];\n\n    if (isNil(seg) || isNil(index)) {\n      return null;\n    }\n\n    var l = seg.length;\n    var nextSeg = curve[index + 1];\n\n    var _a = CubicUtil.pointAt( // @ts-ignore\n    seg[l - 2], seg[l - 1], nextSeg[1], nextSeg[2], nextSeg[3], nextSeg[4], nextSeg[5], nextSeg[6], subt),\n        x = _a.x,\n        y = _a.y;\n\n    return new Point(x, y);\n  };\n  /**\n   * Get start tangent vector\n   */\n\n\n  Path.prototype.getStartTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var result = [];\n\n    if (segments.length > 1) {\n      var startPoint = segments[0].currentPoint;\n      var endPoint = segments[1].currentPoint;\n      var tangent = segments[1].startTangent;\n      result = [];\n\n      if (tangent) {\n        result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      } else {\n        result.push([endPoint[0], endPoint[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      }\n    }\n\n    return result;\n  };\n  /**\n   * Get end tangent vector\n   */\n\n\n  Path.prototype.getEndTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var length = segments.length;\n    var result = [];\n\n    if (length > 1) {\n      var startPoint = segments[length - 2].currentPoint;\n      var endPoint = segments[length - 1].currentPoint;\n      var tangent = segments[length - 1].endTangent;\n      result = [];\n\n      if (tangent) {\n        result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      } else {\n        result.push([startPoint[0], startPoint[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      }\n    }\n\n    return result;\n  };\n\n  return Path;\n}(DisplayObject);\n\nexport { Path };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/@antv/g/es/display-objects/Path.js"],"names":["__assign","__extends","__rest","Cubic","CubicUtil","isNil","Shape","DisplayObject","Point","Path","_super","_a","style","rest","call","type","PATH","path","lineWidth","miterLimit","prototype","getTotalLength","parsedStyle","totalLength","getPoint","ratio","subt","index","curve","curveSegments","length","forEach","v","i","seg","l","nextSeg","pointAt","x","y","getStartTangent","segments","result","startPoint","currentPoint","endPoint","tangent","startTangent","push","getEndTangent","endTangent"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,SAASC,KAAK,IAAIC,SAAlB,QAAmC,cAAnC;AACA,SAASC,KAAT,QAAsB,WAAtB;AACA,SAASC,KAAT,QAAsB,UAAtB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SAASC,KAAT,QAAsB,WAAtB;;AAEA,IAAIC,IAAI;AACR;AACA,UAAUC,MAAV,EAAkB;AAChBT,EAAAA,SAAS,CAACQ,IAAD,EAAOC,MAAP,CAAT;;AAEA,WAASD,IAAT,CAAcE,EAAd,EAAkB;AAChB,QAAIA,EAAE,KAAK,KAAK,CAAhB,EAAmB;AACjBA,MAAAA,EAAE,GAAG,EAAL;AACD;;AAED,QAAIC,KAAK,GAAGD,EAAE,CAACC,KAAf;AAAA,QACIC,IAAI,GAAGX,MAAM,CAACS,EAAD,EAAK,CAAC,OAAD,CAAL,CADjB;;AAGA,WAAOD,MAAM,CAACI,IAAP,CAAY,IAAZ,EAAkBd,QAAQ,CAAC;AAChCe,MAAAA,IAAI,EAAET,KAAK,CAACU,IADoB;AAEhCJ,MAAAA,KAAK,EAAEZ,QAAQ,CAAC;AACdiB,QAAAA,IAAI,EAAE,EADQ;AAEdC,QAAAA,SAAS,EAAE,CAFG;AAGdC,QAAAA,UAAU,EAAE;AAHE,OAAD,EAIZP,KAJY;AAFiB,KAAD,EAO9BC,IAP8B,CAA1B,KAOM,IAPb;AAQD;;AAEDJ,EAAAA,IAAI,CAACW,SAAL,CAAeC,cAAf,GAAgC,YAAY;AAC1C,WAAO,KAAKC,WAAL,CAAiBL,IAAjB,CAAsBM,WAA7B;AACD,GAFD;AAGA;AACF;AACA;;;AAGEd,EAAAA,IAAI,CAACW,SAAL,CAAeI,QAAf,GAA0B,UAAUC,KAAV,EAAiB;AACzC,QAAIC,IAAI,GAAG,CAAX;AACA,QAAIC,KAAK,GAAG,CAAZ;AACA,QAAIC,KAAK,GAAG,KAAKN,WAAL,CAAiBL,IAAjB,CAAsBW,KAAlC;;AAEA,QAAI,CAAC,KAAKN,WAAL,CAAiBL,IAAjB,CAAsBY,aAAtB,CAAoCC,MAAzC,EAAiD;AAC/C,UAAIF,KAAJ,EAAW;AACT,eAAO,IAAIpB,KAAJ,CAAUoB,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAV,EAAuBA,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAvB,CAAP;AACD;;AAED,aAAO,IAAP;AACD;;AAED,SAAKN,WAAL,CAAiBL,IAAjB,CAAsBY,aAAtB,CAAoCE,OAApC,CAA4C,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC1D,UAAIR,KAAK,IAAIO,CAAC,CAAC,CAAD,CAAV,IAAiBP,KAAK,IAAIO,CAAC,CAAC,CAAD,CAA/B,EAAoC;AAClCN,QAAAA,IAAI,GAAG,CAACD,KAAK,GAAGO,CAAC,CAAC,CAAD,CAAV,KAAkBA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAA1B,CAAP;AACAL,QAAAA,KAAK,GAAGM,CAAR;AACD;AACF,KALD;AAMA,QAAIC,GAAG,GAAGN,KAAK,CAACD,KAAD,CAAf;;AAEA,QAAItB,KAAK,CAAC6B,GAAD,CAAL,IAAc7B,KAAK,CAACsB,KAAD,CAAvB,EAAgC;AAC9B,aAAO,IAAP;AACD;;AAED,QAAIQ,CAAC,GAAGD,GAAG,CAACJ,MAAZ;AACA,QAAIM,OAAO,GAAGR,KAAK,CAACD,KAAK,GAAG,CAAT,CAAnB;;AAEA,QAAIhB,EAAE,GAAGP,SAAS,CAACiC,OAAV,EAAmB;AAC5BH,IAAAA,GAAG,CAACC,CAAC,GAAG,CAAL,CADM,EACGD,GAAG,CAACC,CAAC,GAAG,CAAL,CADN,EACeC,OAAO,CAAC,CAAD,CADtB,EAC2BA,OAAO,CAAC,CAAD,CADlC,EACuCA,OAAO,CAAC,CAAD,CAD9C,EACmDA,OAAO,CAAC,CAAD,CAD1D,EAC+DA,OAAO,CAAC,CAAD,CADtE,EAC2EA,OAAO,CAAC,CAAD,CADlF,EACuFV,IADvF,CAAT;AAAA,QAEIY,CAAC,GAAG3B,EAAE,CAAC2B,CAFX;AAAA,QAGIC,CAAC,GAAG5B,EAAE,CAAC4B,CAHX;;AAKA,WAAO,IAAI/B,KAAJ,CAAU8B,CAAV,EAAaC,CAAb,CAAP;AACD,GAlCD;AAmCA;AACF;AACA;;;AAGE9B,EAAAA,IAAI,CAACW,SAAL,CAAeoB,eAAf,GAAiC,YAAY;AAC3C,QAAIC,QAAQ,GAAG,KAAKnB,WAAL,CAAiBL,IAAjB,CAAsBwB,QAArC;AACA,QAAIC,MAAM,GAAG,EAAb;;AAEA,QAAID,QAAQ,CAACX,MAAT,GAAkB,CAAtB,EAAyB;AACvB,UAAIa,UAAU,GAAGF,QAAQ,CAAC,CAAD,CAAR,CAAYG,YAA7B;AACA,UAAIC,QAAQ,GAAGJ,QAAQ,CAAC,CAAD,CAAR,CAAYG,YAA3B;AACA,UAAIE,OAAO,GAAGL,QAAQ,CAAC,CAAD,CAAR,CAAYM,YAA1B;AACAL,MAAAA,MAAM,GAAG,EAAT;;AAEA,UAAII,OAAJ,EAAa;AACXJ,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACL,UAAU,CAAC,CAAD,CAAV,GAAgBG,OAAO,CAAC,CAAD,CAAxB,EAA6BH,UAAU,CAAC,CAAD,CAAV,GAAgBG,OAAO,CAAC,CAAD,CAApD,CAAZ;AACAJ,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACL,UAAU,CAAC,CAAD,CAAX,EAAgBA,UAAU,CAAC,CAAD,CAA1B,CAAZ;AACD,OAHD,MAGO;AACLD,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACH,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAAZ;AACAH,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACL,UAAU,CAAC,CAAD,CAAX,EAAgBA,UAAU,CAAC,CAAD,CAA1B,CAAZ;AACD;AACF;;AAED,WAAOD,MAAP;AACD,GApBD;AAqBA;AACF;AACA;;;AAGEjC,EAAAA,IAAI,CAACW,SAAL,CAAe6B,aAAf,GAA+B,YAAY;AACzC,QAAIR,QAAQ,GAAG,KAAKnB,WAAL,CAAiBL,IAAjB,CAAsBwB,QAArC;AACA,QAAIX,MAAM,GAAGW,QAAQ,CAACX,MAAtB;AACA,QAAIY,MAAM,GAAG,EAAb;;AAEA,QAAIZ,MAAM,GAAG,CAAb,EAAgB;AACd,UAAIa,UAAU,GAAGF,QAAQ,CAACX,MAAM,GAAG,CAAV,CAAR,CAAqBc,YAAtC;AACA,UAAIC,QAAQ,GAAGJ,QAAQ,CAACX,MAAM,GAAG,CAAV,CAAR,CAAqBc,YAApC;AACA,UAAIE,OAAO,GAAGL,QAAQ,CAACX,MAAM,GAAG,CAAV,CAAR,CAAqBoB,UAAnC;AACAR,MAAAA,MAAM,GAAG,EAAT;;AAEA,UAAII,OAAJ,EAAa;AACXJ,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACH,QAAQ,CAAC,CAAD,CAAR,GAAcC,OAAO,CAAC,CAAD,CAAtB,EAA2BD,QAAQ,CAAC,CAAD,CAAR,GAAcC,OAAO,CAAC,CAAD,CAAhD,CAAZ;AACAJ,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACH,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAAZ;AACD,OAHD,MAGO;AACLH,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACL,UAAU,CAAC,CAAD,CAAX,EAAgBA,UAAU,CAAC,CAAD,CAA1B,CAAZ;AACAD,QAAAA,MAAM,CAACM,IAAP,CAAY,CAACH,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAAZ;AACD;AACF;;AAED,WAAOH,MAAP;AACD,GArBD;;AAuBA,SAAOjC,IAAP;AACD,CAvHD,CAuHEF,aAvHF,CAFA;;AA2HA,SAASE,IAAT","sourcesContent":["import { __assign, __extends, __rest } from \"tslib\";\nimport { Cubic as CubicUtil } from '@antv/g-math';\nimport { isNil } from 'lodash-es';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\nimport { Point } from '../shapes';\n\nvar Path =\n/** @class */\nfunction (_super) {\n  __extends(Path, _super);\n\n  function Path(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n\n    var style = _a.style,\n        rest = __rest(_a, [\"style\"]);\n\n    return _super.call(this, __assign({\n      type: Shape.PATH,\n      style: __assign({\n        path: '',\n        lineWidth: 1,\n        miterLimit: 4\n      }, style)\n    }, rest)) || this;\n  }\n\n  Path.prototype.getTotalLength = function () {\n    return this.parsedStyle.path.totalLength;\n  };\n  /**\n   * Get point according to ratio\n   */\n\n\n  Path.prototype.getPoint = function (ratio) {\n    var subt = 0;\n    var index = 0;\n    var curve = this.parsedStyle.path.curve;\n\n    if (!this.parsedStyle.path.curveSegments.length) {\n      if (curve) {\n        return new Point(curve[0][1], curve[0][2]);\n      }\n\n      return null;\n    }\n\n    this.parsedStyle.path.curveSegments.forEach(function (v, i) {\n      if (ratio >= v[0] && ratio <= v[1]) {\n        subt = (ratio - v[0]) / (v[1] - v[0]);\n        index = i;\n      }\n    });\n    var seg = curve[index];\n\n    if (isNil(seg) || isNil(index)) {\n      return null;\n    }\n\n    var l = seg.length;\n    var nextSeg = curve[index + 1];\n\n    var _a = CubicUtil.pointAt( // @ts-ignore\n    seg[l - 2], seg[l - 1], nextSeg[1], nextSeg[2], nextSeg[3], nextSeg[4], nextSeg[5], nextSeg[6], subt),\n        x = _a.x,\n        y = _a.y;\n\n    return new Point(x, y);\n  };\n  /**\n   * Get start tangent vector\n   */\n\n\n  Path.prototype.getStartTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var result = [];\n\n    if (segments.length > 1) {\n      var startPoint = segments[0].currentPoint;\n      var endPoint = segments[1].currentPoint;\n      var tangent = segments[1].startTangent;\n      result = [];\n\n      if (tangent) {\n        result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      } else {\n        result.push([endPoint[0], endPoint[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      }\n    }\n\n    return result;\n  };\n  /**\n   * Get end tangent vector\n   */\n\n\n  Path.prototype.getEndTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var length = segments.length;\n    var result = [];\n\n    if (length > 1) {\n      var startPoint = segments[length - 2].currentPoint;\n      var endPoint = segments[length - 1].currentPoint;\n      var tangent = segments[length - 1].endTangent;\n      result = [];\n\n      if (tangent) {\n        result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      } else {\n        result.push([startPoint[0], startPoint[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      }\n    }\n\n    return result;\n  };\n\n  return Path;\n}(DisplayObject);\n\nexport { Path };"]},"metadata":{},"sourceType":"module"}