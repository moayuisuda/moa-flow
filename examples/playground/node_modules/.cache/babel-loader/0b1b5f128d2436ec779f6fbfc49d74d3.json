{"ast":null,"code":"import { vec3 } from 'gl-matrix';\n\nvar Plane =\n/** @class */\nfunction () {\n  function Plane(distance, normal) {\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n\n  Plane.prototype.updatePNVertexFlag = function () {\n    this.pnVertexFlag = (Number(this.normal[0] >= 0) << 8) + (Number(this.normal[1] >= 0) << 4) + Number(this.normal[2] >= 0);\n  };\n\n  Plane.prototype.distanceToPoint = function (point) {\n    return vec3.dot(point, this.normal) - this.distance;\n  };\n\n  Plane.prototype.normalize = function () {\n    var invLen = 1 / vec3.len(this.normal);\n    vec3.scale(this.normal, this.normal, invLen);\n    this.distance *= invLen;\n  };\n\n  Plane.prototype.intersectsLine = function (start, end, point) {\n    var d0 = this.distanceToPoint(start);\n    var d1 = this.distanceToPoint(end);\n    var t = d0 / (d0 - d1);\n    var intersects = t >= 0 && t <= 1;\n\n    if (intersects && point) {\n      vec3.lerp(point, start, end, t);\n    }\n\n    return intersects;\n  };\n\n  return Plane;\n}();\n\nexport { Plane };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/@antv/g/es/shapes/Plane.js"],"names":["vec3","Plane","distance","normal","fromValues","updatePNVertexFlag","prototype","pnVertexFlag","Number","distanceToPoint","point","dot","normalize","invLen","len","scale","intersectsLine","start","end","d0","d1","t","intersects","lerp"],"mappings":"AAAA,SAASA,IAAT,QAAqB,WAArB;;AAEA,IAAIC,KAAK;AACT;AACA,YAAY;AACV,WAASA,KAAT,CAAeC,QAAf,EAAyBC,MAAzB,EAAiC;AAC/B,SAAKD,QAAL,GAAgBA,QAAQ,IAAI,CAA5B;AACA,SAAKC,MAAL,GAAcA,MAAM,IAAIH,IAAI,CAACI,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAAxB;AACA,SAAKC,kBAAL;AACD;;AAEDJ,EAAAA,KAAK,CAACK,SAAN,CAAgBD,kBAAhB,GAAqC,YAAY;AAC/C,SAAKE,YAAL,GAAoB,CAACC,MAAM,CAAC,KAAKL,MAAL,CAAY,CAAZ,KAAkB,CAAnB,CAAN,IAA+B,CAAhC,KAAsCK,MAAM,CAAC,KAAKL,MAAL,CAAY,CAAZ,KAAkB,CAAnB,CAAN,IAA+B,CAArE,IAA0EK,MAAM,CAAC,KAAKL,MAAL,CAAY,CAAZ,KAAkB,CAAnB,CAApG;AACD,GAFD;;AAIAF,EAAAA,KAAK,CAACK,SAAN,CAAgBG,eAAhB,GAAkC,UAAUC,KAAV,EAAiB;AACjD,WAAOV,IAAI,CAACW,GAAL,CAASD,KAAT,EAAgB,KAAKP,MAArB,IAA+B,KAAKD,QAA3C;AACD,GAFD;;AAIAD,EAAAA,KAAK,CAACK,SAAN,CAAgBM,SAAhB,GAA4B,YAAY;AACtC,QAAIC,MAAM,GAAG,IAAIb,IAAI,CAACc,GAAL,CAAS,KAAKX,MAAd,CAAjB;AACAH,IAAAA,IAAI,CAACe,KAAL,CAAW,KAAKZ,MAAhB,EAAwB,KAAKA,MAA7B,EAAqCU,MAArC;AACA,SAAKX,QAAL,IAAiBW,MAAjB;AACD,GAJD;;AAMAZ,EAAAA,KAAK,CAACK,SAAN,CAAgBU,cAAhB,GAAiC,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBR,KAAtB,EAA6B;AAC5D,QAAIS,EAAE,GAAG,KAAKV,eAAL,CAAqBQ,KAArB,CAAT;AACA,QAAIG,EAAE,GAAG,KAAKX,eAAL,CAAqBS,GAArB,CAAT;AACA,QAAIG,CAAC,GAAGF,EAAE,IAAIA,EAAE,GAAGC,EAAT,CAAV;AACA,QAAIE,UAAU,GAAGD,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,CAAhC;;AAEA,QAAIC,UAAU,IAAIZ,KAAlB,EAAyB;AACvBV,MAAAA,IAAI,CAACuB,IAAL,CAAUb,KAAV,EAAiBO,KAAjB,EAAwBC,GAAxB,EAA6BG,CAA7B;AACD;;AAED,WAAOC,UAAP;AACD,GAXD;;AAaA,SAAOrB,KAAP;AACD,CAnCD,EAFA;;AAuCA,SAASA,KAAT","sourcesContent":["import { vec3 } from 'gl-matrix';\n\nvar Plane =\n/** @class */\nfunction () {\n  function Plane(distance, normal) {\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n\n  Plane.prototype.updatePNVertexFlag = function () {\n    this.pnVertexFlag = (Number(this.normal[0] >= 0) << 8) + (Number(this.normal[1] >= 0) << 4) + Number(this.normal[2] >= 0);\n  };\n\n  Plane.prototype.distanceToPoint = function (point) {\n    return vec3.dot(point, this.normal) - this.distance;\n  };\n\n  Plane.prototype.normalize = function () {\n    var invLen = 1 / vec3.len(this.normal);\n    vec3.scale(this.normal, this.normal, invLen);\n    this.distance *= invLen;\n  };\n\n  Plane.prototype.intersectsLine = function (start, end, point) {\n    var d0 = this.distanceToPoint(start);\n    var d1 = this.distanceToPoint(end);\n    var t = d0 / (d0 - d1);\n    var intersects = t >= 0 && t <= 1;\n\n    if (intersects && point) {\n      vec3.lerp(point, start, end, t);\n    }\n\n    return intersects;\n  };\n\n  return Plane;\n}();\n\nexport { Plane };"]},"metadata":{},"sourceType":"module"}