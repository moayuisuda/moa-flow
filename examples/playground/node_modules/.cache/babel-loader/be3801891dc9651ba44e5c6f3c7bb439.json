{"ast":null,"code":"import { __extends, __decorate } from '../../node_modules/tslib/tslib.es6.js';\nimport { observer } from 'mobx-react';\nimport styles from './style.less.js';\nimport React from 'react';\nimport { FlowContext } from '../../Context.js';\nimport { STAGE_CLASS_NAME } from '../../constants.js';\n\nvar RightClickPanel =\n/** @class */\nfunction (_super) {\n  __extends(RightClickPanel, _super);\n\n  function RightClickPanel(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.initStageEvent = function () {\n      var _a;\n\n      (_a = document.querySelector(\"#\" + STAGE_CLASS_NAME)) === null || _a === void 0 ? void 0 : _a.addEventListener(\"contextmenu\", function (e) {\n        e.preventDefault();\n        _this.context.buffer.rightClickPanel.visible = true;\n\n        _this.setState({\n          pos: {\n            x: e.clientX,\n            y: e.clientY\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      pos: {\n        x: 0,\n        y: 0\n      }\n    };\n    return _this;\n  }\n\n  RightClickPanel.prototype.componentDidMount = function () {\n    var _this = this; // 子组件会在commit阶段先挂载触发didMount\n\n\n    Promise.resolve().then(function () {\n      _this.initStageEvent();\n    });\n  };\n\n  RightClickPanel.prototype.dele = function () {};\n\n  RightClickPanel.prototype.moveToTop = function () {};\n\n  RightClickPanel.prototype.render = function () {\n    if (!this.context.buffer.rightClickPanel.visible) return React.createElement(React.Fragment, null);\n    return React.createElement(\"div\", {\n      style: {\n        top: this.state.pos.y,\n        left: this.state.pos.x\n      },\n      className: styles[\"toolbar\"]\n    }, this.props.children(this.context));\n  };\n\n  RightClickPanel.contextType = FlowContext;\n  RightClickPanel = __decorate([observer], RightClickPanel);\n  return RightClickPanel;\n}(React.Component);\n\nvar getRightClickPanel = function (children) {\n  return React.Children.toArray(children).find(function (item) {\n    return item.type === RightClickPanel;\n  });\n};\n\nexport { RightClickPanel as default, getRightClickPanel };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/packages/flow/lib/components/RightClickPanel/index.js"],"names":["__extends","__decorate","observer","styles","React","FlowContext","STAGE_CLASS_NAME","RightClickPanel","_super","props","_this","call","initStageEvent","_a","document","querySelector","addEventListener","e","preventDefault","context","buffer","rightClickPanel","visible","setState","pos","x","clientX","y","clientY","state","prototype","componentDidMount","Promise","resolve","then","dele","moveToTop","render","createElement","Fragment","style","top","left","className","children","contextType","Component","getRightClickPanel","Children","toArray","find","item","type","default"],"mappings":"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","sourcesContent":["import { __extends, __decorate } from '../../node_modules/tslib/tslib.es6.js';\nimport { observer } from 'mobx-react';\nimport styles from './style.less.js';\nimport React from 'react';\nimport { FlowContext } from '../../Context.js';\nimport { STAGE_CLASS_NAME } from '../../constants.js';\n\nvar RightClickPanel = /** @class */ (function (_super) {\n    __extends(RightClickPanel, _super);\n    function RightClickPanel(props) {\n        var _this = _super.call(this, props) || this;\n        _this.initStageEvent = function () {\n            var _a;\n            (_a = document\n                .querySelector(\"#\" + STAGE_CLASS_NAME)) === null || _a === void 0 ? void 0 : _a.addEventListener(\"contextmenu\", function (e) {\n                e.preventDefault();\n                _this.context.buffer.rightClickPanel.visible = true;\n                _this.setState({\n                    pos: {\n                        x: e.clientX,\n                        y: e.clientY,\n                    },\n                });\n            });\n        };\n        _this.state = {\n            pos: {\n                x: 0,\n                y: 0,\n            },\n        };\n        return _this;\n    }\n    RightClickPanel.prototype.componentDidMount = function () {\n        var _this = this;\n        // 子组件会在commit阶段先挂载触发didMount\n        Promise.resolve().then(function () {\n            _this.initStageEvent();\n        });\n    };\n    RightClickPanel.prototype.dele = function () { };\n    RightClickPanel.prototype.moveToTop = function () { };\n    RightClickPanel.prototype.render = function () {\n        if (!this.context.buffer.rightClickPanel.visible)\n            return React.createElement(React.Fragment, null);\n        return (React.createElement(\"div\", { style: {\n                top: this.state.pos.y,\n                left: this.state.pos.x,\n            }, className: styles[\"toolbar\"] }, this.props.children(this.context)));\n    };\n    RightClickPanel.contextType = FlowContext;\n    RightClickPanel = __decorate([\n        observer\n    ], RightClickPanel);\n    return RightClickPanel;\n}(React.Component));\nvar getRightClickPanel = function (children) {\n    return React.Children.toArray(children).find(function (item) {\n        return item.type === RightClickPanel;\n    });\n};\n\nexport { RightClickPanel as default, getRightClickPanel };\n"]},"metadata":{},"sourceType":"module"}