{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"disabled\", \"title\", \"children\", \"style\", \"className\"];\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\nimport { isPlatformMac } from './utils/platformUtil';\nimport useBaseProps from './hooks/useBaseProps';\nimport SelectContext from './SelectContext';\n\nfunction isTitleType(content) {\n  return typeof content === 'string' || typeof content === 'number';\n}\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\n\nvar OptionList = function OptionList(_, ref) {\n  var _useBaseProps = useBaseProps(),\n      prefixCls = _useBaseProps.prefixCls,\n      id = _useBaseProps.id,\n      open = _useBaseProps.open,\n      multiple = _useBaseProps.multiple,\n      searchValue = _useBaseProps.searchValue,\n      toggleOpen = _useBaseProps.toggleOpen,\n      notFoundContent = _useBaseProps.notFoundContent,\n      onPopupScroll = _useBaseProps.onPopupScroll;\n\n  var _React$useContext = React.useContext(SelectContext),\n      flattenOptions = _React$useContext.flattenOptions,\n      onActiveValue = _React$useContext.onActiveValue,\n      defaultActiveFirstOption = _React$useContext.defaultActiveFirstOption,\n      onSelect = _React$useContext.onSelect,\n      menuItemSelectedIcon = _React$useContext.menuItemSelectedIcon,\n      rawValues = _React$useContext.rawValues,\n      fieldNames = _React$useContext.fieldNames,\n      virtual = _React$useContext.virtual,\n      listHeight = _React$useContext.listHeight,\n      listItemHeight = _React$useContext.listItemHeight;\n\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(args) {\n    if (listRef.current) {\n      listRef.current.scrollTo(args);\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    var fromKeyboard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    setActiveIndex(index);\n    var info = {\n      source: fromKeyboard ? 'keyboard' : 'mouse'\n    }; // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1, info);\n      return;\n    }\n\n    onActiveValue(flattenItem.value, index, info);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  useEffect(function () {\n    /**\n     * React will skip `onChange` when component update.\n     * `setActive` function will call root accessibility state update which makes re-render.\n     * So we need to delay to let Input component trigger onChange first.\n     */\n    var timeoutId = setTimeout(function () {\n      if (!multiple && open && rawValues.size === 1) {\n        var value = Array.from(rawValues)[0];\n        var index = memoFlattenOptions.findIndex(function (_ref) {\n          var data = _ref.data;\n          return data.value === value;\n        });\n\n        if (index !== -1) {\n          setActive(index);\n          scrollIntoView(index);\n        }\n      }\n    }); // Force trigger scrollbar visible when open\n\n    if (open) {\n      var _listRef$current;\n\n      (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.scrollTo(undefined);\n    }\n\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [open, searchValue]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !rawValues.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      toggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which,\n            ctrlKey = event.ctrlKey;\n\n        switch (which) {\n          // >>> Arrow keys & ctrl + n/p on Mac\n          case KeyCode.N:\n          case KeyCode.P:\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              } else if (isPlatformMac() && ctrlKey) {\n                if (which === KeyCode.N) {\n                  offset = 1;\n                } else if (which === KeyCode.P) {\n                  offset = -1;\n                }\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex, true);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              toggleOpen(false);\n\n              if (open) {\n                event.stopPropagation();\n              }\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {},\n      scrollTo: function scrollTo(index) {\n        scrollIntoView(index);\n      }\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  var omitFieldNameList = Object.keys(fieldNames).map(function (key) {\n    return fieldNames[key];\n  });\n\n  var getLabel = function getLabel(item) {\n    return item.label;\n  };\n\n  var renderItem = function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    if (!item) return null;\n    var itemData = item.data || {};\n    var value = itemData.value;\n    var group = item.group;\n    var attrs = pickAttrs(itemData, true);\n    var mergedLabel = getLabel(item);\n    return item ? /*#__PURE__*/React.createElement(\"div\", _extends({\n      \"aria-label\": typeof mergedLabel === 'string' && !group ? mergedLabel : null\n    }, attrs, {\n      key: index,\n      role: group ? 'presentation' : 'option',\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": rawValues.has(value)\n    }), value) : null;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      width: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), /*#__PURE__*/React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: listHeight,\n    itemHeight: listItemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onPopupScroll,\n    virtual: virtual\n  }, function (item, itemIndex) {\n    var _classNames;\n\n    var group = item.group,\n        groupOption = item.groupOption,\n        data = item.data,\n        label = item.label,\n        value = item.value;\n    var key = data.key; // Group\n\n    if (group) {\n      var _data$title;\n\n      var groupTitle = (_data$title = data.title) !== null && _data$title !== void 0 ? _data$title : isTitleType(label) && label;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\")),\n        title: groupTitle\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className,\n        otherProps = _objectWithoutProperties(data, _excluded);\n\n    var passedProps = omit(otherProps, omitFieldNameList); // Option\n\n    var selected = rawValues.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = getLabel(item);\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected; // https://github.com/ant-design/ant-design/issues/34145\n\n    var content = typeof mergedLabel === 'number' ? mergedLabel : mergedLabel || value; // https://github.com/ant-design/ant-design/issues/26717\n\n    var optionTitle = isTitleType(content) ? content.toString() : undefined;\n\n    if (title !== undefined) {\n      optionTitle = title;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, passedProps, {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: optionTitle,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, content), /*#__PURE__*/React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && /*#__PURE__*/React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = /*#__PURE__*/React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/rc-select/es/OptionList.js"],"names":["_defineProperty","_objectWithoutProperties","_extends","_slicedToArray","_excluded","React","useEffect","KeyCode","omit","pickAttrs","useMemo","classNames","List","TransBtn","isPlatformMac","useBaseProps","SelectContext","isTitleType","content","OptionList","_","ref","_useBaseProps","prefixCls","id","open","multiple","searchValue","toggleOpen","notFoundContent","onPopupScroll","_React$useContext","useContext","flattenOptions","onActiveValue","defaultActiveFirstOption","onSelect","menuItemSelectedIcon","rawValues","fieldNames","virtual","listHeight","listItemHeight","itemPrefixCls","concat","memoFlattenOptions","prev","next","listRef","useRef","onListMouseDown","event","preventDefault","scrollIntoView","args","current","scrollTo","getEnabledActiveIndex","index","offset","arguments","length","undefined","len","i","_memoFlattenOptions$c","group","data","disabled","_React$useState","useState","_React$useState2","activeIndex","setActiveIndex","setActive","fromKeyboard","info","source","flattenItem","value","timeoutId","setTimeout","size","Array","from","findIndex","_ref","_listRef$current","clearTimeout","onSelectValue","selected","has","useImperativeHandle","onKeyDown","which","ctrlKey","N","P","UP","DOWN","nextActiveIndex","ENTER","item","ESC","stopPropagation","onKeyUp","createElement","role","className","onMouseDown","omitFieldNameList","Object","keys","map","key","getLabel","label","renderItem","itemData","attrs","mergedLabel","Fragment","style","height","width","overflow","itemKey","itemHeight","fullHeight","onScroll","itemIndex","_classNames","groupOption","_data$title","groupTitle","title","children","otherProps","passedProps","optionPrefixCls","optionClassName","iconVisible","optionTitle","toString","onMouseMove","onClick","isValidElement","customizeIcon","customizeIconProps","isSelected","RefOptionList","forwardRef","displayName"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"disabled\", \"title\", \"children\", \"style\", \"className\"];\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\nimport { isPlatformMac } from './utils/platformUtil';\nimport useBaseProps from './hooks/useBaseProps';\nimport SelectContext from './SelectContext';\n\nfunction isTitleType(content) {\n  return typeof content === 'string' || typeof content === 'number';\n}\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\n\nvar OptionList = function OptionList(_, ref) {\n  var _useBaseProps = useBaseProps(),\n      prefixCls = _useBaseProps.prefixCls,\n      id = _useBaseProps.id,\n      open = _useBaseProps.open,\n      multiple = _useBaseProps.multiple,\n      searchValue = _useBaseProps.searchValue,\n      toggleOpen = _useBaseProps.toggleOpen,\n      notFoundContent = _useBaseProps.notFoundContent,\n      onPopupScroll = _useBaseProps.onPopupScroll;\n\n  var _React$useContext = React.useContext(SelectContext),\n      flattenOptions = _React$useContext.flattenOptions,\n      onActiveValue = _React$useContext.onActiveValue,\n      defaultActiveFirstOption = _React$useContext.defaultActiveFirstOption,\n      onSelect = _React$useContext.onSelect,\n      menuItemSelectedIcon = _React$useContext.menuItemSelectedIcon,\n      rawValues = _React$useContext.rawValues,\n      fieldNames = _React$useContext.fieldNames,\n      virtual = _React$useContext.virtual,\n      listHeight = _React$useContext.listHeight,\n      listItemHeight = _React$useContext.listItemHeight;\n\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(args) {\n    if (listRef.current) {\n      listRef.current.scrollTo(args);\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    var fromKeyboard = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    setActiveIndex(index);\n    var info = {\n      source: fromKeyboard ? 'keyboard' : 'mouse'\n    }; // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1, info);\n      return;\n    }\n\n    onActiveValue(flattenItem.value, index, info);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  useEffect(function () {\n    /**\n     * React will skip `onChange` when component update.\n     * `setActive` function will call root accessibility state update which makes re-render.\n     * So we need to delay to let Input component trigger onChange first.\n     */\n    var timeoutId = setTimeout(function () {\n      if (!multiple && open && rawValues.size === 1) {\n        var value = Array.from(rawValues)[0];\n        var index = memoFlattenOptions.findIndex(function (_ref) {\n          var data = _ref.data;\n          return data.value === value;\n        });\n\n        if (index !== -1) {\n          setActive(index);\n          scrollIntoView(index);\n        }\n      }\n    }); // Force trigger scrollbar visible when open\n\n    if (open) {\n      var _listRef$current;\n\n      (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.scrollTo(undefined);\n    }\n\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [open, searchValue]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !rawValues.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      toggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which,\n            ctrlKey = event.ctrlKey;\n\n        switch (which) {\n          // >>> Arrow keys & ctrl + n/p on Mac\n          case KeyCode.N:\n          case KeyCode.P:\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              } else if (isPlatformMac() && ctrlKey) {\n                if (which === KeyCode.N) {\n                  offset = 1;\n                } else if (which === KeyCode.P) {\n                  offset = -1;\n                }\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex, true);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              toggleOpen(false);\n\n              if (open) {\n                event.stopPropagation();\n              }\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {},\n      scrollTo: function scrollTo(index) {\n        scrollIntoView(index);\n      }\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  var omitFieldNameList = Object.keys(fieldNames).map(function (key) {\n    return fieldNames[key];\n  });\n\n  var getLabel = function getLabel(item) {\n    return item.label;\n  };\n\n  var renderItem = function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    if (!item) return null;\n    var itemData = item.data || {};\n    var value = itemData.value;\n    var group = item.group;\n    var attrs = pickAttrs(itemData, true);\n    var mergedLabel = getLabel(item);\n    return item ? /*#__PURE__*/React.createElement(\"div\", _extends({\n      \"aria-label\": typeof mergedLabel === 'string' && !group ? mergedLabel : null\n    }, attrs, {\n      key: index,\n      role: group ? 'presentation' : 'option',\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": rawValues.has(value)\n    }), value) : null;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      width: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), /*#__PURE__*/React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: listHeight,\n    itemHeight: listItemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onPopupScroll,\n    virtual: virtual\n  }, function (item, itemIndex) {\n    var _classNames;\n\n    var group = item.group,\n        groupOption = item.groupOption,\n        data = item.data,\n        label = item.label,\n        value = item.value;\n    var key = data.key; // Group\n\n    if (group) {\n      var _data$title;\n\n      var groupTitle = (_data$title = data.title) !== null && _data$title !== void 0 ? _data$title : isTitleType(label) && label;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\")),\n        title: groupTitle\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className,\n        otherProps = _objectWithoutProperties(data, _excluded);\n\n    var passedProps = omit(otherProps, omitFieldNameList); // Option\n\n    var selected = rawValues.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = getLabel(item);\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected; // https://github.com/ant-design/ant-design/issues/34145\n\n    var content = typeof mergedLabel === 'number' ? mergedLabel : mergedLabel || value; // https://github.com/ant-design/ant-design/issues/26717\n\n    var optionTitle = isTitleType(content) ? content.toString() : undefined;\n\n    if (title !== undefined) {\n      optionTitle = title;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, passedProps, {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: optionTitle,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, content), /*#__PURE__*/React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && /*#__PURE__*/React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = /*#__PURE__*/React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;"]},"metadata":{},"sourceType":"module"}