{"ast":null,"code":"import { __decorate } from \"tslib\"; // import { uniq } from '@lodash-es';\n\nimport { singleton } from 'mana-syringe';\nimport { CSSKeywordValue } from '../cssom';\nimport { Opx, Odeg, parseTransform, mergeTransforms } from '../parser';\n/**\n * @see /zh/docs/api/animation#支持变换的属性\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\n\nvar CSSPropertyTransform =\n/** @class */\nfunction () {\n  function CSSPropertyTransform() {\n    this.parser = parseTransform;\n    this.mixer = mergeTransforms;\n  }\n\n  CSSPropertyTransform.prototype.calculator = function (name, oldValue, newValue, object) {\n    if (newValue instanceof CSSKeywordValue) {\n      newValue = [];\n    } // const uniqTypes = uniq([\n    //   ...(oldValue || []).map(({ t }) => t),\n    //   ...(newValue || []).map(({ t }) => t),\n    // ]);\n\n\n    newValue.forEach(function (transform) {\n      var t = transform.t;\n      var value = (newValue || []).find(function (o) {\n        return o.t === t;\n      });\n      var old = (oldValue || []).find(function (o) {\n        return o.t === t;\n      });\n\n      if (t === 'scale') {\n        // scale(1) scale(1, 1)\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1, 1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1, 1];\n        object.scaleLocal(newScale[0] / oldScale[0], newScale[1] / oldScale[1], 1);\n      } else if (t === 'scalex') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(newScale[0] / oldScale[0], 1, 1);\n      } else if (t === 'scaley') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(1, newScale[0] / oldScale[0], 1);\n      } else if (t === 'scalez') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(1, 1, newScale[0] / oldScale[0]);\n      } else if (t === 'scale3d') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1, 1, 1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1, 1, 1];\n        object.scaleLocal(newScale[0] / oldScale[0], newScale[1] / oldScale[1], newScale[2] / oldScale[2]);\n      } else if (t === 'translate') {\n        var newTranslation = value && value.d || [Opx, Opx];\n        var oldTranslation = old && old.d || [Opx, Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, newTranslation[1].value - oldTranslation[1].value, 0);\n      } else if (t === 'translatex') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, 0, 0);\n      } else if (t === 'translatey') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(0, newTranslation[0].value - oldTranslation[0].value, 0);\n      } else if (t === 'translatez') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(0, 0, newTranslation[0].value - oldTranslation[0].value);\n      } else if (t === 'translate3d') {\n        var newTranslation = value && value.d || [Opx, Opx, Opx];\n        var oldTranslation = old && old.d || [Opx, Opx, Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, newTranslation[1].value - oldTranslation[1].value, newTranslation[2].value - oldTranslation[2].value);\n      } else if (t === 'rotate') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, 0, newAngles[0].value - oldAngles[0].value);\n      } else if (t === 'rotatex') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(newAngles[0].value - oldAngles[0].value, 0, 0);\n      } else if (t === 'rotatey') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, newAngles[0].value - oldAngles[0].value, 0);\n      } else if (t === 'rotatez') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, 0, newAngles[0].value - oldAngles[0].value);\n      } else if (t === 'rotate3d') {// 暂不支持绕指定轴旋转\n        // const newAngles = value && value.d || [Odeg, Odeg, Odeg];\n        // const oldAngles = old && old.d || [Odeg, Odeg, Odeg];\n        // object.rotateLocal(\n        //   newAngles[0].value - oldAngles[0].value,\n        //   newAngles[1].value - oldAngles[1].value,\n        //   newAngles[2].value - oldAngles[2].value,\n        // );\n      }\n    });\n    return newValue;\n  };\n\n  CSSPropertyTransform = __decorate([singleton()], CSSPropertyTransform);\n  return CSSPropertyTransform;\n}();\n\nexport { CSSPropertyTransform };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/@antv/g/es/css/properties/CSSPropertyTransform.js"],"names":["__decorate","singleton","CSSKeywordValue","Opx","Odeg","parseTransform","mergeTransforms","CSSPropertyTransform","parser","mixer","prototype","calculator","name","oldValue","newValue","object","forEach","transform","t","value","find","o","old","newScale","d","map","s","oldScale","scaleLocal","newTranslation","oldTranslation","translateLocal","newAngles","oldAngles","rotateLocal"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\"; // import { uniq } from '@lodash-es';\n\nimport { singleton } from 'mana-syringe';\nimport { CSSKeywordValue } from '../cssom';\nimport { Opx, Odeg, parseTransform, mergeTransforms } from '../parser';\n/**\n * @see /zh/docs/api/animation#支持变换的属性\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\n\nvar CSSPropertyTransform =\n/** @class */\nfunction () {\n  function CSSPropertyTransform() {\n    this.parser = parseTransform;\n    this.mixer = mergeTransforms;\n  }\n\n  CSSPropertyTransform.prototype.calculator = function (name, oldValue, newValue, object) {\n    if (newValue instanceof CSSKeywordValue) {\n      newValue = [];\n    } // const uniqTypes = uniq([\n    //   ...(oldValue || []).map(({ t }) => t),\n    //   ...(newValue || []).map(({ t }) => t),\n    // ]);\n\n\n    newValue.forEach(function (transform) {\n      var t = transform.t;\n      var value = (newValue || []).find(function (o) {\n        return o.t === t;\n      });\n      var old = (oldValue || []).find(function (o) {\n        return o.t === t;\n      });\n\n      if (t === 'scale') {\n        // scale(1) scale(1, 1)\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1, 1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1, 1];\n        object.scaleLocal(newScale[0] / oldScale[0], newScale[1] / oldScale[1], 1);\n      } else if (t === 'scalex') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(newScale[0] / oldScale[0], 1, 1);\n      } else if (t === 'scaley') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(1, newScale[0] / oldScale[0], 1);\n      } else if (t === 'scalez') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1];\n        object.scaleLocal(1, 1, newScale[0] / oldScale[0]);\n      } else if (t === 'scale3d') {\n        var newScale = value && value.d && value.d.map(function (s) {\n          return s.value;\n        }) || [1, 1, 1];\n        var oldScale = old && old.d && old.d.map(function (s) {\n          return s.value;\n        }) || [1, 1, 1];\n        object.scaleLocal(newScale[0] / oldScale[0], newScale[1] / oldScale[1], newScale[2] / oldScale[2]);\n      } else if (t === 'translate') {\n        var newTranslation = value && value.d || [Opx, Opx];\n        var oldTranslation = old && old.d || [Opx, Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, newTranslation[1].value - oldTranslation[1].value, 0);\n      } else if (t === 'translatex') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, 0, 0);\n      } else if (t === 'translatey') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(0, newTranslation[0].value - oldTranslation[0].value, 0);\n      } else if (t === 'translatez') {\n        var newTranslation = value && value.d || [Opx];\n        var oldTranslation = old && old.d || [Opx];\n        object.translateLocal(0, 0, newTranslation[0].value - oldTranslation[0].value);\n      } else if (t === 'translate3d') {\n        var newTranslation = value && value.d || [Opx, Opx, Opx];\n        var oldTranslation = old && old.d || [Opx, Opx, Opx];\n        object.translateLocal(newTranslation[0].value - oldTranslation[0].value, newTranslation[1].value - oldTranslation[1].value, newTranslation[2].value - oldTranslation[2].value);\n      } else if (t === 'rotate') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, 0, newAngles[0].value - oldAngles[0].value);\n      } else if (t === 'rotatex') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(newAngles[0].value - oldAngles[0].value, 0, 0);\n      } else if (t === 'rotatey') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, newAngles[0].value - oldAngles[0].value, 0);\n      } else if (t === 'rotatez') {\n        var newAngles = value && value.d || [Odeg];\n        var oldAngles = old && old.d || [Odeg];\n        object.rotateLocal(0, 0, newAngles[0].value - oldAngles[0].value);\n      } else if (t === 'rotate3d') {// 暂不支持绕指定轴旋转\n        // const newAngles = value && value.d || [Odeg, Odeg, Odeg];\n        // const oldAngles = old && old.d || [Odeg, Odeg, Odeg];\n        // object.rotateLocal(\n        //   newAngles[0].value - oldAngles[0].value,\n        //   newAngles[1].value - oldAngles[1].value,\n        //   newAngles[2].value - oldAngles[2].value,\n        // );\n      }\n    });\n    return newValue;\n  };\n\n  CSSPropertyTransform = __decorate([singleton()], CSSPropertyTransform);\n  return CSSPropertyTransform;\n}();\n\nexport { CSSPropertyTransform };"]},"metadata":{},"sourceType":"module"}