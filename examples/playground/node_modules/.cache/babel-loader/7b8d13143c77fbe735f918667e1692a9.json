{"ast":null,"code":"import { __extends, __rest, __assign, __decorate } from '../node_modules/tslib/tslib.es6.js';\nimport { Group } from '@antv/react-g';\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { FlowContext } from '../Context.js';\nimport Port from './Port.js';\n\nvar Interactor =\n/** @class */\nfunction (_super) {\n  __extends(Interactor, _super);\n\n  function Interactor(props) {\n    return _super.call(this, props) || this;\n  }\n\n  Interactor.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        context = _a.context,\n        _b = _a.props,\n        _c = _b.x,\n        x = _c === void 0 ? 0 : _c,\n        _d = _b.y,\n        y = _d === void 0 ? 0 : _d;\n\n    _b.draggable;\n\n    var id = _b.id,\n        _f = _b.topOnFocus,\n        topOnFocus = _f === void 0 ? true : _f,\n        _g = _b.selectable,\n        selectable = _g === void 0 ? true : _g,\n        others = __rest(_b, [\"x\", \"y\", \"draggable\", \"id\", \"topOnFocus\", \"selectable\"]);\n\n    return React.createElement(Group, __assign({\n      x: x,\n      y: y,\n      onRightdown: function () {\n        var selectCells = _this.context.selectCells;\n\n        if (selectable) {\n          if (!selectCells.includes(_this.props.id)) context.setSelectedCells([id]);\n        }\n      },\n      onMousedown: function (e) {\n        var _a = _this.context,\n            selectCells = _a.selectCells,\n            _b = _a.buffer,\n            select = _b.select,\n            drag = _b.drag;\n\n        if (selectable) {\n          if (!selectCells.includes(_this.props.id)) context.setSelectedCells([id]); // drag\n\n          if (topOnFocus) _this.context.moveTo(_this.props.id, _this.context.canvasData.cells.length - 1);\n          select.isSelecting = true;\n          drag.start.x = e.canvas.x;\n          drag.start.y = e.canvas.y;\n        }\n      }\n    }, others), this.props.children);\n  };\n\n  Interactor.contextType = FlowContext;\n  Interactor = __decorate([observer], Interactor);\n  return Interactor;\n}(React.Component);\n\nInteractor.Port = Port;\nexport { Interactor as default };","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/packages/flow/lib/scaffold/Interacotr.js"],"names":["__extends","__rest","__assign","__decorate","Group","React","observer","FlowContext","Port","Interactor","_super","props","call","prototype","render","_this","_a","context","_b","_c","x","_d","y","draggable","id","_f","topOnFocus","_g","selectable","others","createElement","onRightdown","selectCells","includes","setSelectedCells","onMousedown","e","buffer","select","drag","moveTo","canvasData","cells","length","isSelecting","start","canvas","children","contextType","Component","default"],"mappings":"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","sourcesContent":["import { __extends, __rest, __assign, __decorate } from '../node_modules/tslib/tslib.es6.js';\nimport { Group } from '@antv/react-g';\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { FlowContext } from '../Context.js';\nimport Port from './Port.js';\n\nvar Interactor = /** @class */ (function (_super) {\n    __extends(Interactor, _super);\n    function Interactor(props) {\n        return _super.call(this, props) || this;\n    }\n    Interactor.prototype.render = function () {\n        var _this = this;\n        var _a = this, context = _a.context, _b = _a.props, _c = _b.x, x = _c === void 0 ? 0 : _c, _d = _b.y, y = _d === void 0 ? 0 : _d; _b.draggable; var id = _b.id, _f = _b.topOnFocus, topOnFocus = _f === void 0 ? true : _f, _g = _b.selectable, selectable = _g === void 0 ? true : _g, others = __rest(_b, [\"x\", \"y\", \"draggable\", \"id\", \"topOnFocus\", \"selectable\"]);\n        return (React.createElement(Group, __assign({ x: x, y: y, onRightdown: function () {\n                var selectCells = _this.context.selectCells;\n                if (selectable) {\n                    if (!selectCells.includes(_this.props.id))\n                        context.setSelectedCells([id]);\n                }\n            }, onMousedown: function (e) {\n                var _a = _this.context, selectCells = _a.selectCells, _b = _a.buffer, select = _b.select, drag = _b.drag;\n                if (selectable) {\n                    if (!selectCells.includes(_this.props.id))\n                        context.setSelectedCells([id]);\n                    // drag\n                    if (topOnFocus)\n                        _this.context.moveTo(_this.props.id, _this.context.canvasData.cells.length - 1);\n                    select.isSelecting = true;\n                    drag.start.x = e.canvas.x;\n                    drag.start.y = e.canvas.y;\n                }\n            } }, others), this.props.children));\n    };\n    Interactor.contextType = FlowContext;\n    Interactor = __decorate([\n        observer\n    ], Interactor);\n    return Interactor;\n}(React.Component));\nInteractor.Port = Port;\n\nexport { Interactor as default };\n"]},"metadata":{},"sourceType":"module"}