{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Container = void 0;\n\nvar binding_1 = require(\"../bindings/binding\");\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar literal_types_1 = require(\"../constants/literal_types\");\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\n\nvar planner_1 = require(\"../planning/planner\");\n\nvar resolver_1 = require(\"../resolution/resolver\");\n\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\n\nvar id_1 = require(\"../utils/id\");\n\nvar serialization_1 = require(\"../utils/serialization\");\n\nvar container_snapshot_1 = require(\"./container_snapshot\");\n\nvar lookup_1 = require(\"./lookup\");\n\nvar Container = function () {\n  function Container(containerOptions) {\n    this._appliedMiddleware = [];\n    var options = containerOptions || {};\n\n    if (typeof options !== \"object\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n    }\n\n    if (options.defaultScope === undefined) {\n      options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n    } else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton && options.defaultScope !== literal_types_1.BindingScopeEnum.Transient && options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n    }\n\n    if (options.autoBindInjectable === undefined) {\n      options.autoBindInjectable = false;\n    } else if (typeof options.autoBindInjectable !== \"boolean\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n    }\n\n    if (options.skipBaseClassChecks === undefined) {\n      options.skipBaseClassChecks = false;\n    } else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n    }\n\n    this.options = {\n      autoBindInjectable: options.autoBindInjectable,\n      defaultScope: options.defaultScope,\n      skipBaseClassChecks: options.skipBaseClassChecks\n    };\n    this.id = id_1.id();\n    this._bindingDictionary = new lookup_1.Lookup();\n    this._snapshots = [];\n    this._middleware = null;\n    this.parent = null;\n    this._metadataReader = new metadata_reader_1.MetadataReader();\n  }\n\n  Container.merge = function (container1, container2) {\n    var container3 = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      container3[_i - 2] = arguments[_i];\n    }\n\n    var container = new Container();\n\n    var targetContainers = __spreadArray([container1, container2], container3).map(function (targetContainer) {\n      return planner_1.getBindingDictionary(targetContainer);\n    });\n\n    var bindingDictionary = planner_1.getBindingDictionary(container);\n\n    function copyDictionary(origin, destination) {\n      origin.traverse(function (key, value) {\n        value.forEach(function (binding) {\n          destination.add(binding.serviceIdentifier, binding.clone());\n        });\n      });\n    }\n\n    targetContainers.forEach(function (targetBindingDictionary) {\n      copyDictionary(targetBindingDictionary, bindingDictionary);\n    });\n    return container;\n  };\n\n  Container.prototype.load = function () {\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    var getHelpers = this._getContainerModuleHelpersFactory();\n\n    for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n      var currentModule = modules_1[_a];\n      var containerModuleHelpers = getHelpers(currentModule.id);\n      currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n    }\n  };\n\n  Container.prototype.loadAsync = function () {\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            getHelpers = this._getContainerModuleHelpersFactory();\n            _a = 0, modules_2 = modules;\n            _b.label = 1;\n\n          case 1:\n            if (!(_a < modules_2.length)) return [3, 4];\n            currentModule = modules_2[_a];\n            containerModuleHelpers = getHelpers(currentModule.id);\n            return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n\n          case 2:\n            _b.sent();\n\n            _b.label = 3;\n\n          case 3:\n            _a++;\n            return [3, 1];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  };\n\n  Container.prototype.unload = function () {\n    var _this = this;\n\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    var conditionFactory = function (expected) {\n      return function (item) {\n        return item.moduleId === expected;\n      };\n    };\n\n    modules.forEach(function (module) {\n      var condition = conditionFactory(module.id);\n\n      _this._bindingDictionary.removeByCondition(condition);\n    });\n  };\n\n  Container.prototype.bind = function (serviceIdentifier) {\n    var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n    var binding = new binding_1.Binding(serviceIdentifier, scope);\n\n    this._bindingDictionary.add(serviceIdentifier, binding);\n\n    return new binding_to_syntax_1.BindingToSyntax(binding);\n  };\n\n  Container.prototype.rebind = function (serviceIdentifier) {\n    this.unbind(serviceIdentifier);\n    return this.bind(serviceIdentifier);\n  };\n\n  Container.prototype.unbind = function (serviceIdentifier) {\n    try {\n      this._bindingDictionary.remove(serviceIdentifier);\n    } catch (e) {\n      throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n    }\n  };\n\n  Container.prototype.unbindAll = function () {\n    this._bindingDictionary = new lookup_1.Lookup();\n  };\n\n  Container.prototype.isBound = function (serviceIdentifier) {\n    var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n\n    if (!bound && this.parent) {\n      bound = this.parent.isBound(serviceIdentifier);\n    }\n\n    return bound;\n  };\n\n  Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n    return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n    var bound = false;\n\n    if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n      var bindings = this._bindingDictionary.get(serviceIdentifier);\n\n      var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n      bound = bindings.some(function (b) {\n        return b.constraint(request_1);\n      });\n    }\n\n    if (!bound && this.parent) {\n      bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n    }\n\n    return bound;\n  };\n\n  Container.prototype.snapshot = function () {\n    this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n  };\n\n  Container.prototype.restore = function () {\n    var snapshot = this._snapshots.pop();\n\n    if (snapshot === undefined) {\n      throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n    }\n\n    this._bindingDictionary = snapshot.bindings;\n    this._middleware = snapshot.middleware;\n  };\n\n  Container.prototype.createChild = function (containerOptions) {\n    var child = new Container(containerOptions || this.options);\n    child.parent = this;\n    return child;\n  };\n\n  Container.prototype.applyMiddleware = function () {\n    var middlewares = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      middlewares[_i] = arguments[_i];\n    }\n\n    this._appliedMiddleware = this._appliedMiddleware.concat(middlewares);\n    var initial = this._middleware ? this._middleware : this._planAndResolve();\n    this._middleware = middlewares.reduce(function (prev, curr) {\n      return curr(prev);\n    }, initial);\n  };\n\n  Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n    this._metadataReader = metadataReader;\n  };\n\n  Container.prototype.get = function (serviceIdentifier) {\n    return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n  };\n\n  Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n    return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n  };\n\n  Container.prototype.getNamed = function (serviceIdentifier, named) {\n    return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.getAll = function (serviceIdentifier) {\n    return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n  };\n\n  Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n    return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n  };\n\n  Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n    return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.resolve = function (constructorFunction) {\n    var tempContainer = this.createChild();\n    tempContainer.bind(constructorFunction).toSelf();\n\n    this._appliedMiddleware.forEach(function (m) {\n      tempContainer.applyMiddleware(m);\n    });\n\n    return tempContainer.get(constructorFunction);\n  };\n\n  Container.prototype._getContainerModuleHelpersFactory = function () {\n    var _this = this;\n\n    var setModuleId = function (bindingToSyntax, moduleId) {\n      bindingToSyntax._binding.moduleId = moduleId;\n    };\n\n    var getBindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _bind = _this.bind.bind(_this);\n\n        var bindingToSyntax = _bind(serviceIdentifier);\n\n        setModuleId(bindingToSyntax, moduleId);\n        return bindingToSyntax;\n      };\n    };\n\n    var getUnbindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _unbind = _this.unbind.bind(_this);\n\n        _unbind(serviceIdentifier);\n      };\n    };\n\n    var getIsboundFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _isBound = _this.isBound.bind(_this);\n\n        return _isBound(serviceIdentifier);\n      };\n    };\n\n    var getRebindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _rebind = _this.rebind.bind(_this);\n\n        var bindingToSyntax = _rebind(serviceIdentifier);\n\n        setModuleId(bindingToSyntax, moduleId);\n        return bindingToSyntax;\n      };\n    };\n\n    return function (mId) {\n      return {\n        bindFunction: getBindFunction(mId),\n        isboundFunction: getIsboundFunction(mId),\n        rebindFunction: getRebindFunction(mId),\n        unbindFunction: getUnbindFunction(mId)\n      };\n    };\n  };\n\n  Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n    var result = null;\n    var defaultArgs = {\n      avoidConstraints: avoidConstraints,\n      contextInterceptor: function (context) {\n        return context;\n      },\n      isMultiInject: isMultiInject,\n      key: key,\n      serviceIdentifier: serviceIdentifier,\n      targetType: targetType,\n      value: value\n    };\n\n    if (this._middleware) {\n      result = this._middleware(defaultArgs);\n\n      if (result === undefined || result === null) {\n        throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n      }\n    } else {\n      result = this._planAndResolve()(defaultArgs);\n    }\n\n    return result;\n  };\n\n  Container.prototype._planAndResolve = function () {\n    var _this = this;\n\n    return function (args) {\n      var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n      context = args.contextInterceptor(context);\n      var result = resolver_1.resolve(context);\n      return result;\n    };\n  };\n\n  return Container;\n}();\n\nexports.Container = Container;","map":{"version":3,"mappings":"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","names":["containerOptions","options","Error","ERROR_MSGS","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","defaultScope","undefined","literal_types_1","Transient","Singleton","Request","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","autoBindInjectable","CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE","skipBaseClassChecks","CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK","id","id_1","_bindingDictionary","lookup_1","_snapshots","_middleware","parent","_metadataReader","metadata_reader_1","Container","container1","container2","container3","container","targetContainers","__spreadArray","map","targetContainer","bindingDictionary","planner_1","copyDictionary","origin","destination","traverse","key","value","forEach","binding","add","serviceIdentifier","clone","targetBindingDictionary","modules","getHelpers","_getContainerModuleHelpersFactory","_a","currentModule","containerModuleHelpers","registry","bindFunction","unbindFunction","isboundFunction","rebindFunction","modules_2","_b","conditionFactory","expected","item","moduleId","module","condition","_this","removeByCondition","scope","binding_1","binding_to_syntax_1","unbind","bind","remove","e","CANNOT_UNBIND","serialization_1","bound","hasKey","isBound","named","isBoundTagged","METADATA_KEY","NAMED_TAG","bindings","get","request_1","some","b","constraint","push","container_snapshot_1","of","snapshot","pop","NO_MORE_SNAPSHOTS_AVAILABLE","middleware","child","middlewares","_appliedMiddleware","concat","initial","_planAndResolve","reduce","prev","curr","metadataReader","_get","Variable","getTagged","getAllTagged","constructorFunction","tempContainer","createChild","toSelf","m","applyMiddleware","setModuleId","bindingToSyntax","_binding","getBindFunction","_bind","getUnbindFunction","_unbind","getIsboundFunction","_isBound","getRebindFunction","_rebind","rebind","mId","avoidConstraints","isMultiInject","targetType","result","defaultArgs","contextInterceptor","context","INVALID_MIDDLEWARE_RETURN","args","resolver_1","exports"],"sources":["../../src/container/container.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}