{"ast":null,"code":"import { Canvas as GCanvas } from '@antv/g';\nimport React, { forwardRef, useLayoutEffect, useRef } from 'react';\nimport { reconcilor } from './reconciler';\nimport { assertRef } from './util';\nexport var Canvas = /*#__PURE__*/forwardRef(function (_a, ref) {\n  var children = _a.children,\n      classname = _a.classname,\n      role = _a.role,\n      style = _a.style,\n      tabIndex = _a.tabIndex,\n      title = _a.title,\n      renderer = _a.renderer,\n      width = _a.width,\n      height = _a.height,\n      capture = _a.capture,\n      cursor = _a.cursor;\n  assertRef(ref);\n  var container = useRef();\n  var divRef = useRef(null);\n  var innerCanvasRef = useRef(null);\n  var canvasRef = ref || innerCanvasRef;\n  useLayoutEffect(function () {\n    var canvas = new GCanvas({\n      renderer: renderer,\n      width: width,\n      height: height,\n      capture: capture,\n      cursor: cursor,\n      container: divRef.current\n    });\n    canvasRef.current = canvas;\n    container.current = reconcilor.createContainer(canvas, 1, false, null);\n    return function () {\n      reconcilor.updateContainer(null, container.current, null);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useLayoutEffect(function () {\n    if (container.current) {\n      reconcilor.updateContainer(children, container.current, null);\n    }\n  }, [children]);\n  useLayoutEffect(function () {\n    var _a;\n\n    (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.setRenderer(renderer);\n  }, [canvasRef, renderer]);\n  useLayoutEffect(function () {\n    var _a;\n\n    (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.setCursor(cursor);\n  }, [canvasRef, cursor]);\n  useLayoutEffect(function () {\n    canvasRef.current.resize(width, height);\n  }, [width, height, canvasRef]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: divRef,\n    className: classname,\n    role: role,\n    style: style,\n    tabIndex: tabIndex,\n    title: title\n  });\n});","map":{"version":3,"sources":["/Users/dennis.zhang/Desktop/其它代码库/moa-flow/node_modules/@antv/react-g/es/canvas.js"],"names":["Canvas","GCanvas","React","forwardRef","useLayoutEffect","useRef","reconcilor","assertRef","_a","ref","children","classname","role","style","tabIndex","title","renderer","width","height","capture","cursor","container","divRef","innerCanvasRef","canvasRef","canvas","current","createContainer","updateContainer","setRenderer","setCursor","resize","createElement","className"],"mappings":"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","sourcesContent":["import { Canvas as GCanvas } from '@antv/g';\nimport React, { forwardRef, useLayoutEffect, useRef } from 'react';\nimport { reconcilor } from './reconciler';\nimport { assertRef } from './util';\nexport var Canvas = /*#__PURE__*/forwardRef(function (_a, ref) {\n  var children = _a.children,\n      classname = _a.classname,\n      role = _a.role,\n      style = _a.style,\n      tabIndex = _a.tabIndex,\n      title = _a.title,\n      renderer = _a.renderer,\n      width = _a.width,\n      height = _a.height,\n      capture = _a.capture,\n      cursor = _a.cursor;\n  assertRef(ref);\n  var container = useRef();\n  var divRef = useRef(null);\n  var innerCanvasRef = useRef(null);\n  var canvasRef = ref || innerCanvasRef;\n  useLayoutEffect(function () {\n    var canvas = new GCanvas({\n      renderer: renderer,\n      width: width,\n      height: height,\n      capture: capture,\n      cursor: cursor,\n      container: divRef.current\n    });\n    canvasRef.current = canvas;\n    container.current = reconcilor.createContainer(canvas, 1, false, null);\n    return function () {\n      reconcilor.updateContainer(null, container.current, null);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useLayoutEffect(function () {\n    if (container.current) {\n      reconcilor.updateContainer(children, container.current, null);\n    }\n  }, [children]);\n  useLayoutEffect(function () {\n    var _a;\n\n    (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.setRenderer(renderer);\n  }, [canvasRef, renderer]);\n  useLayoutEffect(function () {\n    var _a;\n\n    (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.setCursor(cursor);\n  }, [canvasRef, cursor]);\n  useLayoutEffect(function () {\n    canvasRef.current.resize(width, height);\n  }, [width, height, canvasRef]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: divRef,\n    className: classname,\n    role: role,\n    style: style,\n    tabIndex: tabIndex,\n    title: title\n  });\n});"]},"metadata":{},"sourceType":"module"}