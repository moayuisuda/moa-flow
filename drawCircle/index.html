<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        margin: 0;
      }

      .content {
        background: #000;
      }
    </style>
  </head>

  <body>
    <canvas width="1000" height="1000" class="canvas"></canvas>
  </body>
  <script src="./perlin.js"></script>
  <script>
    let time = Date.now().valueOf();
    const distance = 40;
    const scale = 2000;

    const canvas = document.querySelector("canvas");
    const context = canvas.getContext("2d");

    class Point {
      constructor({ x, y }) {
        this.x = x;
        this.y = y;
      }

      draw() {
        context.beginPath();
        const seed = noise.simplex2(this.x / scale, this.y / scale);
        // const seed = noise.simplex3(this.x / scale, this.y / scale, time);
        context.arc(this.x, this.y, 10, 0, 2 * Math.PI);
        // context.arc(this.x, this.y, Math.abs(seed) * 10, 0, 2 * Math.PI);
        context.strokeStyle = `rgba(0,0,0,1)`;
        // context.strokeStyle = `rgba(0,0,0,${seed})`;
        context.stroke();
      }
    }

    let points = [];
    function genPoints() {
      for (let y = 0; y < canvas.height; y += distance) {
        for (let x = 0; x < canvas.width; x += distance) {
          points.push(
            new Point({
              x: x,
              y: y,
            })
          );
        }
      }
    }

    function draw() {
      context.clearRect(0, 0, canvas.width, canvas.height);

      for (let i of points) {
        i.draw();
      }
    }

    function animate() {
      draw();
      time = new Date().valueOf() / scale;
      requestAnimationFrame(animate);
    }

    genPoints();
    draw();
    // animate();
  </script>
</html>
