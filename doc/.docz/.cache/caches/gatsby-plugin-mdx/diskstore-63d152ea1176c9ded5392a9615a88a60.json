{"expireTime":9007200927973506000,"key":"gatsby-plugin-mdx-entire-payload-d8110267bbd581e2ade597a3dc5d36fb-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/admin/code/moa-flow/moa-fow-version-dom/moa-flow/doc/node_modules/gatsby-theme-docz/src/base/Layout.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":138,"offset":139},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":141},"end":{"line":5,"column":29,"offset":169},"indent":[]}},{"type":"import","value":"import { Playground } from 'docz'","position":{"start":{"line":8,"column":1,"offset":172},"end":{"line":8,"column":34,"offset":205},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"API","position":{"start":{"line":11,"column":3,"offset":210},"end":{"line":11,"column":6,"offset":213},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":208},"end":{"line":11,"column":6,"offset":213},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"moa-flow具有完善的ts支持，可以直接在代码中看到对应的标注，此文档暂仅作参考","position":{"start":{"line":12,"column":1,"offset":214},"end":{"line":12,"column":43,"offset":256},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":214},"end":{"line":12,"column":43,"offset":256},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Flow组件 props","position":{"start":{"line":14,"column":4,"offset":261},"end":{"line":14,"column":16,"offset":273},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":258},"end":{"line":14,"column":16,"offset":273},"indent":[]}},{"type":"code","lang":"tsx","meta":null,"value":"link?: (source: D, target: D) => boolean;\ndir: PortDir;\nanchor: { x: number; y: number } | (() => { x: number; y: number });\ndata: Object;","position":{"start":{"line":16,"column":1,"offset":275},"end":{"line":21,"column":4,"offset":424},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Port组件 props","position":{"start":{"line":22,"column":4,"offset":428},"end":{"line":22,"column":16,"offset":440},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":425},"end":{"line":22,"column":16,"offset":440},"indent":[]}},{"type":"code","lang":"tsx","meta":null,"value":"canvasData?: any; // 画布的数据\nonEvent?: (e: { type: string; data: any }) => void; // 可在外层监听线条连接等事件，但不推荐，\n//在edge内部也可用Port的link属性来定义连接时的行为，尽量将行为内聚在组件model中\n\nonLoad?: (model: FlowModel) => void;\nflowModelRef?: any;\nwidth?: number;\nheight?: number;\ngrid?: number;\nmultiSelect?: boolean; // 是否开启多选\ncomponents?: Record<string, React.FC<any>>;\nmodels?: Record<string, typeof CellModel>;\nlinkEdge?: string; // 当前默认连接的edge","position":{"start":{"line":24,"column":1,"offset":442},"end":{"line":38,"column":4,"offset":864},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"FlowModel 属性","position":{"start":{"line":40,"column":4,"offset":869},"end":{"line":40,"column":16,"offset":881},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":866},"end":{"line":40,"column":16,"offset":881},"indent":[]}},{"type":"code","lang":"tsx","meta":null,"value":"get height: () => number \nset height: (grid: number) => void\n\nget width: () => number \nset width: (grid: number) => void\n\nget grid: () => number\nset grid: (grid: number) => void\n  \nget linkEdge: () => number \nset linkEdge: (linkEdge: string) => void\n\nget scale: () => number \nset scale: (scale: number) => void\n\nget x: () => number \nset x: (x: number) => void\n\nget y: () => number \nset y: (y: number) => void\n\n// 右键菜单的visible\nget contextMenuVisible: () => boolean \nset contextMenuVisible: (visible: boolean) => void\n  \n// 获取当前正在连接的port\ngetLinkingPort: () => string\n\n// 获取当前鼠标的[画布坐标]\ngetCursorCoord: (e: React.MouseEvent, isCanvasCoord: boolean = true) => {x: Number, y: number};\n\ncanvasData: Object\n\n// 设置画布数据\nsetCanvasData: (canvasData: CanvasDataType) => void;\n\n// 设置某个Cell的data，包括node，edge，port\nsetCellData = (id: string, data: any, deepMerge: boolean = true) => void;\n\n// 获取某个node连接的所有edge\ngetNodeEdges: (nodeId: string) => string[];\n\n//获取某个port连接的所有port\ngetPortLinkPorts: (portId: string) => string[];\n\n// 获取某个port连接的所有node\ngetPortLinkNodes: (portId: string) => string[]\n\n// 获取某个node连接的所有port\ngetLinkPorts: (nodeId: string) => string[];\n\n// 获取某个node连接的所有node\ngetLinkNodes: (nodeId: string) => string[];\n\n// 删除某个Cell\ndeleCell: (id: string) => string;\n\n// 增添Cell，返回增添cell的id\naddCell: (componentName: string, initOptions?: any) => string\n\n// 手动对port进行连线，返回增添edge的id\nlink: (source: string, target: string) => string\n\n// 调整某个Cell的层级\nmoveTo: (id: string, index: number) => void\n\ngetCellData: (id: string) => Object\n\ngetCellModel: (id: string) => CellModel;\n\ngetPortInstance: (id: string) => React.Component","position":{"start":{"line":42,"column":1,"offset":883},"end":{"line":114,"column":4,"offset":2499},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"CellModel 属性","position":{"start":{"line":116,"column":4,"offset":2504},"end":{"line":116,"column":16,"offset":2516},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":2501},"end":{"line":116,"column":16,"offset":2516},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"NodeModel和EdgeModel都是继承于CellModel","position":{"start":{"line":118,"column":1,"offset":2518},"end":{"line":118,"column":34,"offset":2551},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":2518},"end":{"line":118,"column":34,"offset":2551},"indent":[]}},{"type":"code","lang":"jsx","meta":null,"value":"defaultData = (): any => ({\n    id: \"\", // 自动生成\n    component: \"\", // 取注册的component，如没有则自动生成\n    cellType: \"\", // 自动生成\n  });\n\ncontext: FlowModel;\n\ndata: CellDataType;\n\n// 是否被选中\nisSelect: boolean\n\n// 获取外层包裹div/g的元素实例\ngetWrapperRef: () => HTMLDivElement\n\nsetData = (data: any, rec: boolean = true): void\n\n// 获取某个Model合并了原型链上所有父class的defaultData后的defaultData\nstatic getDefaultData: () => Object","position":{"start":{"line":120,"column":1,"offset":2553},"end":{"line":141,"column":4,"offset":2955},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"NodeModel 属性","position":{"start":{"line":143,"column":4,"offset":2960},"end":{"line":143,"column":16,"offset":2972},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":2957},"end":{"line":143,"column":16,"offset":2972},"indent":[]}},{"type":"code","lang":"tsx","meta":null,"value":"getLinkNodes: () => string[]\ngetLinkPorts: () => string[]\ngetNodeEdges: () => string[]\n","position":{"start":{"line":145,"column":1,"offset":2974},"end":{"line":150,"column":4,"offset":3072},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"EdgeModel 属性","position":{"start":{"line":152,"column":4,"offset":3077},"end":{"line":152,"column":16,"offset":3089},"indent":[]}}],"position":{"start":{"line":152,"column":1,"offset":3074},"end":{"line":152,"column":16,"offset":3089},"indent":[]}},{"type":"code","lang":"tsx","meta":null,"value":"defaultData: () => ({\n  source: \"\", // 连线会自动更改\n  target: \"\", // 连线会自动更改\n});\n\ngetLinkNodesData: () => {source: Object, target: Object}\n\ngetPointAt: (ratio: number) => {x: number, y: number}\n\n// 是否正在连线\nisLinking: () => boolean\n\n// 用作<path>的d属性中\nd: string\n","position":{"start":{"line":154,"column":1,"offset":3091},"end":{"line":170,"column":4,"offset":3355},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":174,"column":1,"offset":3359},"end":{"line":174,"column":31,"offset":3389},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":174,"column":31,"offset":3389}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/admin/code/moa-flow/moa-fow-version-dom/moa-flow/doc/node_modules/gatsby-theme-docz/src/base/Layout.js\"\nimport { Playground } from 'docz'\nexport const _frontmatter = {};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"api\"\n    }}>{`API`}</h1>\n    <p>{`moa-flow具有完善的ts支持，可以直接在代码中看到对应的标注，此文档暂仅作参考`}</p>\n    <h2 {...{\n      \"id\": \"flow组件-props\"\n    }}>{`Flow组件 props`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`link?: (source: D, target: D) => boolean;\ndir: PortDir;\nanchor: { x: number; y: number } | (() => { x: number; y: number });\ndata: Object;\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"port组件-props\"\n    }}>{`Port组件 props`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`canvasData?: any; // 画布的数据\nonEvent?: (e: { type: string; data: any }) => void; // 可在外层监听线条连接等事件，但不推荐，\n//在edge内部也可用Port的link属性来定义连接时的行为，尽量将行为内聚在组件model中\n\nonLoad?: (model: FlowModel) => void;\nflowModelRef?: any;\nwidth?: number;\nheight?: number;\ngrid?: number;\nmultiSelect?: boolean; // 是否开启多选\ncomponents?: Record<string, React.FC<any>>;\nmodels?: Record<string, typeof CellModel>;\nlinkEdge?: string; // 当前默认连接的edge\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"flowmodel-属性\"\n    }}>{`FlowModel 属性`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`get height: () => number \nset height: (grid: number) => void\n\nget width: () => number \nset width: (grid: number) => void\n\nget grid: () => number\nset grid: (grid: number) => void\n  \nget linkEdge: () => number \nset linkEdge: (linkEdge: string) => void\n\nget scale: () => number \nset scale: (scale: number) => void\n\nget x: () => number \nset x: (x: number) => void\n\nget y: () => number \nset y: (y: number) => void\n\n// 右键菜单的visible\nget contextMenuVisible: () => boolean \nset contextMenuVisible: (visible: boolean) => void\n  \n// 获取当前正在连接的port\ngetLinkingPort: () => string\n\n// 获取当前鼠标的[画布坐标]\ngetCursorCoord: (e: React.MouseEvent, isCanvasCoord: boolean = true) => {x: Number, y: number};\n\ncanvasData: Object\n\n// 设置画布数据\nsetCanvasData: (canvasData: CanvasDataType) => void;\n\n// 设置某个Cell的data，包括node，edge，port\nsetCellData = (id: string, data: any, deepMerge: boolean = true) => void;\n\n// 获取某个node连接的所有edge\ngetNodeEdges: (nodeId: string) => string[];\n\n//获取某个port连接的所有port\ngetPortLinkPorts: (portId: string) => string[];\n\n// 获取某个port连接的所有node\ngetPortLinkNodes: (portId: string) => string[]\n\n// 获取某个node连接的所有port\ngetLinkPorts: (nodeId: string) => string[];\n\n// 获取某个node连接的所有node\ngetLinkNodes: (nodeId: string) => string[];\n\n// 删除某个Cell\ndeleCell: (id: string) => string;\n\n// 增添Cell，返回增添cell的id\naddCell: (componentName: string, initOptions?: any) => string\n\n// 手动对port进行连线，返回增添edge的id\nlink: (source: string, target: string) => string\n\n// 调整某个Cell的层级\nmoveTo: (id: string, index: number) => void\n\ngetCellData: (id: string) => Object\n\ngetCellModel: (id: string) => CellModel;\n\ngetPortInstance: (id: string) => React.Component\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"cellmodel-属性\"\n    }}>{`CellModel 属性`}</h2>\n    <p>{`NodeModel和EdgeModel都是继承于CellModel`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`defaultData = (): any => ({\n    id: \"\", // 自动生成\n    component: \"\", // 取注册的component，如没有则自动生成\n    cellType: \"\", // 自动生成\n  });\n\ncontext: FlowModel;\n\ndata: CellDataType;\n\n// 是否被选中\nisSelect: boolean\n\n// 获取外层包裹div/g的元素实例\ngetWrapperRef: () => HTMLDivElement\n\nsetData = (data: any, rec: boolean = true): void\n\n// 获取某个Model合并了原型链上所有父class的defaultData后的defaultData\nstatic getDefaultData: () => Object\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"nodemodel-属性\"\n    }}>{`NodeModel 属性`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`getLinkNodes: () => string[]\ngetLinkPorts: () => string[]\ngetNodeEdges: () => string[]\n\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"edgemodel-属性\"\n    }}>{`EdgeModel 属性`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`defaultData: () => ({\n  source: \"\", // 连线会自动更改\n  target: \"\", // 连线会自动更改\n});\n\ngetLinkNodesData: () => {source: Object, target: Object}\n\ngetPointAt: (ratio: number) => {x: number, y: number}\n\n// 是否正在连线\nisLinking: () => boolean\n\n// 用作<path>的d属性中\nd: string\n\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;"}}