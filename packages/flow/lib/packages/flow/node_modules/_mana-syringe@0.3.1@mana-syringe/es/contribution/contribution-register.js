import { Syringe } from '../core.js';
import { Provider } from './contribution-protocol.js';
import { DefaultContributionProvider } from './contribution-provider.js';

function contributionInjectOption(token, option) {
  return {
    token: {
      token: Provider,
      named: token
    },
    useDynamic: function useDynamic(ctx) {
      return new DefaultContributionProvider(token, ctx.container, option);
    },
    lifecycle: Syringe.Lifecycle.singleton
  };
}
function contributionRegister(registerMethod, identifier, option) {
  registerMethod({
    token: {
      token: Provider,
      named: identifier
    },
    useDynamic: function useDynamic(ctx) {
      return new DefaultContributionProvider(identifier, ctx.container, option);
    },
    lifecycle: Syringe.Lifecycle.singleton
  });
}

export { contributionInjectOption, contributionRegister };
